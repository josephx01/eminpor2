<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emin Niyazlı - Videographer</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" type="image/png" href="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/c8566904-1d0a-4423-b629-81e3e8eb74e5-removebg-preview.png">
</head>
<style>
            * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
            cursor: none;
        }

        /* Custom Cursor */
        .custom-cursor {
            position: fixed;
            width: 16px;
            height: 16px;
            background: #FFAD00;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
            box-shadow: 0 0 20px rgba(255, 173, 0, 0.6), 0 0 40px rgba(255, 173, 0, 0.3);
            backdrop-filter: blur(5px);
        }

        .custom-cursor.hover {
            width: 40px;
            height: 40px;
            background: rgba(255, 173, 0, 0.8);
            box-shadow: 0 0 30px rgba(255, 173, 0, 0.8), 0 0 60px rgba(255, 173, 0, 0.4);
        }

        /* Mouse Trail */
        .mouse-trail {
            position: fixed;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #FFAD00, transparent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 25px 50px;
            background: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(20px);
            z-index: 1000;
            transition: all 0.4s ease;
            border-bottom: 1px solid rgba(255, 173, 0, 0.1);
        }

        nav.scrolled {
            background: rgba(10, 10, 10, 0.95);
            padding: 20px 50px;
            border-bottom: 1px solid rgba(255, 173, 0, 0.2);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(45deg, #FFAD00, #F2545B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 40px;
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #FFAD00;
            margin: 3px 0;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(255, 173, 0, 0.3);
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
            background: #F2545B;
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
            background: #F2545B;
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu .nav-links {
            flex-direction: column;
            gap: 50px;
            text-align: center;
        }

        .mobile-menu .nav-links a {
            font-size: 2rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(45deg, #FFAD00, #F2545B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            transform: translateY(30px);
            animation: none;
        }

        .mobile-menu.active .nav-links a {
            opacity: 1;
            transform: translateY(0);
            animation: slideInUp 0.6s ease-out forwards;
        }
        /* Reels Filter Container */
.reels-filters {
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 165, 0, 0.9);
    border-radius: 25px;
    padding: 10px 20px;
    z-index: 999;
    display: none;
    gap: 15px;
    opacity: 0;
    transition: all 0.3s ease;
}

.reels-filters.visible {
    display: flex !important;
    opacity: 1 !important;
}

.reels-filter-btn {
    background: #000;
    border: 2px solid #FFA500;
    color: #FFA500;
    padding: 10px 20px;
    border-radius: 15px;
    cursor: pointer;
    font-weight: bold;
    text-transform: uppercase;
}

.reels-filter-btn:hover {
    background: #FFA500;
    color: #000;
}

.reels-filter-btn.active {
    background: #FFA500;
    color: #000;
}

/* Card Dealing Animation */
.reels-filter-btn:nth-child(1) {
    animation-delay: 0.1s;
}
.reels-filter-btn:nth-child(2) {
    animation-delay: 0.2s;
}
.reels-filter-btn:nth-child(3) {
    animation-delay: 0.3s;
}

.reels-filters.dealing .reels-filter-btn {
    animation: cardDeal 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes cardDeal {
    0% {
        transform: translateY(20px) rotateX(-90deg) scale(0.8);
        opacity: 0;
    }
    50% {
        transform: translateY(10px) rotateX(-45deg) scale(0.9);
        opacity: 0.5;
    }
    100% {
        transform: translateY(0) rotateX(0deg) scale(1);
        opacity: 1;
    }
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .reels-filters {
        top: 70px;
        padding: 6px 12px;
        gap: 10px;
    }
    
    .reels-filter-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
    }
}
        .mobile-menu.active .nav-links a:nth-child(1) { animation-delay: 0.1s; }
        .mobile-menu.active .nav-links a:nth-child(2) { animation-delay: 0.2s; }
        .mobile-menu.active .nav-links a:nth-child(3) { animation-delay: 0.3s; }
        .mobile-menu.active .nav-links a:nth-child(4) { animation-delay: 0.4s; }
        .mobile-menu.active .nav-links a:nth-child(5) { animation-delay: 0.5s; }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mobile-menu .nav-links a:hover {
            color: #FFAD00;
            text-shadow: 0 0 20px rgba(255, 173, 0, 0.5);
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            font-weight: 400;
            font-size: 15px;
            transition: all 0.3s ease;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-links a:hover {
            color: #FFAD00;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(45deg, #FFAD00, #F2545B);
            transition: width 0.4s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Scroll Progress */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #FFAD00, #F2545B);
            z-index: 9999;
            transition: width 0.1s ease;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -3;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at center, transparent 0%, rgba(10, 10, 10, 0.4) 70%),
                linear-gradient(135deg, rgba(255, 173, 0, 0.1) 0%, rgba(242, 84, 91, 0.1) 100%);
            z-index: -2;
        }

        .grain-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><defs><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" result="noise"/><feColorMatrix in="noise" type="saturate" values="0"/><feComponentTransfer><feFuncA type="discrete" tableValues="0.02 0.02 0.02 0.02 0.02"/></feComponentTransfer></filter></defs><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.4"/></svg>');
            z-index: -1;
            opacity: 0.3;
            animation: grain 0.5s steps(8) infinite;
        }

        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            10% { transform: translate(-1px, -1px); }
            20% { transform: translate(1px, 1px); }
            30% { transform: translate(-1px, 1px); }
            40% { transform: translate(1px, -1px); }
            50% { transform: translate(-1px, -1px); }
            60% { transform: translate(1px, 1px); }
            70% { transform: translate(-1px, 1px); }
            80% { transform: translate(1px, -1px); }
            90% { transform: translate(-1px, -1px); }
        }

        .hero-content {
            text-align: center;
            z-index: 1;
            max-width: 800px;
            padding: 0 20px;
        }

        .hero-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(135deg, #ffffff 0%, #FFAD00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(255, 173, 0, 0.3); }
            100% { text-shadow: 0 0 40px rgba(255, 173, 0, 0.6); }
        }

        .hero-subtitle {
            font-size: 1.4rem;
            font-weight: 300;
            opacity: 0.9;
            margin-bottom: 50px;
            line-height: 1.6;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: #FFAD00;
            font-size: 14px;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }

        /* Section Styles */
        .section {
            padding: 120px 50px;
            max-width: 1400px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(60px);
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title {
            font-size: 3.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 80px;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #FFAD00, #F2545B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .section-subtitle{
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 80px;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #FFAD00, #F2545B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Reels Grid */
        .reels-container {
            margin-bottom: 120px;
        }

        .reels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .reel-card {
            aspect-ratio: 9/16;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 173, 0, 0.1);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }

        .reel-card:hover {
            transform: translateY(-15px) scale(1.02);
            border-color: rgba(255, 173, 0, 0.3);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.3),
                0 0 40px rgba(255, 173, 0, 0.2);
        }

        .reel-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.5s ease;
        }

        .reel-card:hover .reel-video {
            transform: scale(1.05);
        }

        .reel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            padding: 40px 25px 25px;
            transform: translateY(100%);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .reel-card:hover .reel-overlay {
            transform: translateY(0);
        }

        .reel-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #FFAD00;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reel-description {
            font-size: 0.95rem;
            opacity: 0.85;
            line-height: 1.5;
        }

        /* About Section */
        .about-content {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 80px;
            align-items: center;
        }

        .about-text {
            font-size: 1.15rem;
            line-height: 1.8;
            opacity: 0.9;
        }

        .about-text h3 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #FFAD00;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .about-text p {
            margin-bottom: 25px;
        }

        .timeline {
            position: relative;
            padding-left: 40px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #FFAD00;
            border-radius: 2px;
            box-shadow: 0 0 20px rgba(255, 173, 0, 0.3);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 50px;
            padding-left: 40px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -28px;
            top: 8px;
            width: 20px;
            height: 20px;
            background: #FFAD00;
            border-radius: 50%;
            box-shadow: 
                0 0 0 4px rgba(10, 10, 10, 1),
                0 0 20px rgba(255, 173, 0, 0.6);
        }

        .timeline-year {
            font-size: 1.4rem;
            font-weight: 700;
            color: #FFAD00;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timeline-desc {
            opacity: 0.8;
            line-height: 1.6;
        }

        /* Works Section */
        .works-filter {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 60px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 173, 0, 0.2);
            color: #ffffff;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.4s ease;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            backdrop-filter: blur(10px);
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: rgba(255, 173, 0, 0.1);
            border-color: #FFAD00;
            color: #FFAD00;
            box-shadow: 0 0 25px rgba(255, 173, 0, 0.3);
            transform: translateY(-2px);
        }
        .lightbox {
    display: none;
    position: fixed;
    z-index: 1000;
    padding-top: 50px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.8);
}

/* Close button */
.lightbox .close {
    position: absolute;
    top: 20px;
    right: 35px;
    color: white;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
}

/* Image inside lightbox */
.lightbox-content {
    display: block;
    margin: auto;
    max-width: 80%;
    max-height: 80%;
}
.works-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    padding: 40px;
    max-width: 1400px;
    margin: 0 auto;
}

.work-card {
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    cursor: pointer;
    height: 300px;
    width: 100%;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.work-card:hover {
    border: 2px solid #ffa500;
    box-shadow: 0 0 20px rgba(255, 165, 0, 0.5);
}

.work-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 10px;
}

.work-overlay {
    position: absolute;
    bottom: 20px;
    left: 20px;
    right: auto;
    padding: 0;
    transform: translateY(20px);
    opacity: 0;
    transition: all 0.4s ease;
    color: white;
    pointer-events: none;
}

.work-card:hover .work-overlay {
    transform: translateY(0);
    opacity: 1;
}

.work-overlay h3 {
    margin: 0 0 4px 0;
    font-size: 1.2rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #ffa500;
    line-height: 1.2;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.work-overlay p {
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.3;
    opacity: 1;
    color: #ffffff;
    font-weight: 400;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

.play-btn {
    display: none;
}
.work-card iframe {
    width: 100%;
    height: 500px; /* Sabit hündürlük qaytar */
    aspect-ratio: unset; /* aspect-ratio-nu sil */
    border-radius: 10px;
    /* object-fit: cover silindi */
}
/* iOS Play Button Container */
.ios-play-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

/* iOS Play Button */
.ios-play-btn {
    background: rgba(255, 165, 0, 0.95);
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 18px;
    color: #000;
    font-weight: bold;
    cursor: pointer;
    pointer-events: auto;
    box-shadow: 0 8px 32px rgba(255, 165, 0, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.ios-play-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 12px 40px rgba(255, 165, 0, 0.6);
}

.ios-play-btn:active {
    transform: scale(0.95);
}

/* Video Fallback */
.video-fallback {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-family: 'Montserrat', sans-serif;
    text-align: center;
    z-index: 5;
    border-radius: 12px;
}

.video-fallback div {
    padding: 20px;
}

.video-fallback div:first-child {
    font-size: 3rem;
    margin-bottom: 15px;
    opacity: 0.7;
}

.video-fallback div:last-child {
    font-size: 1.1rem;
    opacity: 0.8;
    font-weight: 500;
}
.work-card {
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    height: 300px; /* Sabit hündürlük */
}

.work-card img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Şəkil tam dolsun */
    display: block;
    transition: transform 0.3s ease;
}

.work-card:hover img {
    transform: scale(1.05); /* Hover effekti */
}

.video-card {
    grid-column: 1 / -1;
    width: 100%;
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio üçün (9/16 * 100) */
    height: 0;
    overflow: hidden;
    margin: 20px 0;
}

.video-card iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 10px;
}

/* Responsive */
@media (max-width: 768px) {
    .works-grid {
        grid-template-columns: 1fr;
        padding: 20px;
        gap: 15px;
    }
        .ios-play-btn {
        width: 50px;
        height: 50px;
        font-size: 16px;
    }

    .work-card {
        height: 250px;
    }
    
    .work-overlay {
        bottom: 15px;
        left: 15px;
    }
    
    .work-overlay h3 {
        font-size: 1rem;
        letter-spacing: 1px;
    }
    
    .work-overlay p {
        font-size: 0.8rem;
    }
        .work-card iframe {
        width: 100%;
        height: 200px;
    }
        .ios-play-container {
        opacity: 1 !important;
    }
}

/* Loading state */
.work-card.loading .work-video {
    opacity: 0.5;
}

.work-card.loading .ios-play-btn {
    animation: pulse 1.5s infinite;
}
@media (min-width: 769px) and (max-width: 1024px) {
    .works-grid {
        grid-template-columns: repeat(2, 1fr);
        padding: 30px;
    }

    .work-card {
        height: 280px;
    }
}
@keyframes pulse {
    0% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); opacity: 0.8; }
}

/* Error state */
.work-card.error .ios-play-btn {
    background: #ff4444;
    animation: shake 0.5s ease-in-out;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* Video hover effects - yalnız desktop */
@media (min-width: 769px) {
    .work-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        border: 2px solid #ffa500;
    }
    
    .work-card:hover .ios-play-container {
        opacity: 1;
    }
}

/* Safari specific fixes */
@supports (-webkit-backdrop-filter: none) {
    .ios-play-btn {
        -webkit-backdrop-filter: blur(10px);
    }
}

/* High DPI ekranlar üçün */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .work-video, .work-card video {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    .work-card {
        /* Touch üçün daha böyük hit area */
        padding: 10px;
        box-sizing: border-box;
    }
    
    .ios-play-container {
        opacity: 0.8;
        pointer-events: auto;
    }
    
    .ios-play-btn {
        /* Touch üçün daha böyük */
        width: 70px;
        height: 70px;
        font-size: 20px;
    }
    
    .work-overlay {
        /* Mobile-də overlay həmişə görsənsin */
        transform: translateY(0);
        opacity: 0.9;
        background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
        padding: 15px;
        border-radius: 0 0 12px 12px;
    }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .work-card, .ios-play-btn, .work-overlay {
        transition: none;
    }
    
    .ios-play-btn {
        animation: none;
    }
}
    
 .contact-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 60px;
            flex-wrap: wrap;
        }

        .contact-item {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.4s ease;
        }

        .contact-icon {
            width: 80px;
            height: 80px;
            border: 2px solid #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #666;
            background: rgba(255, 165, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .contact-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 165, 0, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .contact-info {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
            font-size: 0.9rem;
            color: #ccc;
            max-width: 200px;
            line-height: 1.4;
        }

        /* Hover Effects */
        .contact-item:hover .contact-icon {
            border-color: #FFA500;
            color: #FFA500;
            background: rgba(255, 165, 0, 0.1);
            transform: translateY(-10px) scale(1.1);
            box-shadow: 0 20px 40px rgba(255, 165, 0, 0.3);
        }

        .contact-item:hover .contact-icon::before {
            left: 100%;
        }

        .contact-item:hover .contact-info {
            opacity: 1;
            transform: translateY(0);
        }

        /* Individual Icon Animations */
        .contact-item:nth-child(1):hover .contact-icon {
            animation: emailPulse 0.6s ease;
        }

        .contact-item:nth-child(2):hover .contact-icon {
            animation: phoneBounce 0.6s ease;
        }

        .contact-item:nth-child(3):hover .contact-icon {
            animation: locationFloat 0.8s ease;
        }

        .social-links {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-top: 40px;
        }

        .social-link {
            width: 60px;
            height: 60px;
            border: 2px solid #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #666;
            text-decoration: none;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .social-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255, 165, 0, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.4s ease;
        }

        .social-link:hover {
            border-color: #FFA500;
            color: #FFA500;
            transform: rotate(360deg) scale(1.2);
        }

        .social-link:hover::after {
            width: 100px;
            height: 100px;
        }

        /* Keyframe Animations */
        @keyframes emailPulse {
            0%, 100% { transform: translateY(-10px) scale(1.1); }
            50% { transform: translateY(-10px) scale(1.2); }
        }

        @keyframes phoneBounce {
            0%, 100% { transform: translateY(-10px) scale(1.1); }
            25% { transform: translateY(-15px) scale(1.15) rotateZ(-5deg); }
            75% { transform: translateY(-15px) scale(1.15) rotateZ(5deg); }
        }

        @keyframes locationFloat {
            0%, 100% { transform: translateY(-10px) scale(1.1); }
            50% { transform: translateY(-20px) scale(1.15); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .contact-content {
                gap: 40px;
            }
            
            .contact-icon {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }
            
            .social-links {
                gap: 20px;
            }
            
            .social-link {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }
        }
       

        /* Responsive Design */
        @media (max-width: 1024px) {
            .about-content,
            .contact-content {
                grid-template-columns: 1fr;
                gap: 60px;
            }
            
            .timeline {
                max-width: 500px;
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }
            
            .nav-container .nav-links {
                display: none;
            }
            
            .section {
                padding: 80px 30px;
            }
            
            .hero-title {
                font-size: 3rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
            
            .section-title {
                font-size: 2.5rem;
            }
            
            nav {
                padding: 20px 30px;
            }
            
            .reels-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 30px;
            }
            
            .works-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .works-filter {
                gap: 15px;
            }
            
            .filter-btn {
                padding: 10px 20px;
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2.2rem;
                letter-spacing: 1px;
            }
            
            .section {
                padding: 60px 20px;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .reels-grid {
                grid-template-columns: 1fr;
                max-width: 350px;
            }
            
            body {
                cursor: auto;
            }
            
            .custom-cursor {
                display: none;
            }
        }

        /* Loading Animation */
        body.loading {
            overflow: hidden;
        }

        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loader.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .loader-content {
            text-align: center;
        }

        .loader-logo {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(45deg, #FFAD00, #F2545B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
        }

        .loader-bar {
            width: 200px;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .loader-progress {
            height: 100%;
            background: linear-gradient(90deg, #FFAD00, #F2545B);
            border-radius: 2px;
            animation: loading 3s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes loading {
            0% { width: 0%; }
            100% { width: 100%; }
        }

</style>
<body class="loading">
    <!-- Custom Cursor -->
    <div class="custom-cursor"></div>
    
    <!-- Scroll Progress -->
    <div class="scroll-progress"></div>
    
    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <div class="logo">Emin Niyazlı</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#reels">Reels</a></li>
                <li><a href="#works">Works</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
             <li><a href="#reels">Reels</a></li>
            <li><a href="#works">Works</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <video class="hero-video" autoplay muted loop playsinline>
            <source src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/Emin.mp4" type="video/mp4">
        </video>
        <div class="hero-overlay"></div>
        <div class="grain-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Welcome</h1>
            <p class="hero-subtitle"></p>
        </div>
        <div class="scroll-indicator">↓ Scroll to Explore</div>
    </section>

       <!-- Reels Section -->
<section class="section reels-container" id="reels">
    <h2 class="section-title">Featured Reels</h2>
    <div class="reels-grid">
        <div class="work-card" data-category="reels">
            <video class="work-video" muted loop playsinline webkit-playsinline preload="none" poster="">
                <source src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/ada.mp4" type="video/mp4">
            </video>
            <div class="work-overlay">
                <h3>ADA University</h3>
                <p>The Biggest University of Azerbaijan</p>
            </div>
        </div>
        
        <div class="work-card" data-category="reels">
            <video class="work-video" muted loop playsinline>
                <source src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/bizimetbex.mp4" type="video/mp4">

            </video>
            <div class="work-overlay">
                <h3>Bizim Metbex</h3>
                <p>The project under initiative of Leyla Aliyeva</p>
            </div>
        </div>
                <div class="work-card" data-category="reels">
            <video class="work-video" muted loop playsinline webkit-playsinline preload="none" poster="">
                <source src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/1.mp4" type="video/mp4">

            </video>
            <div class="work-overlay">
                <h3>Azer Aydemir</h3>
                <p>Skoda's advertisement</p>
            </div>
        </div>
    </div>
</section>

    <!-- Works Section -->
    <section id="works" class="section">
        <h2 class="section-title">Selected Works</h2>
<div class="works-filter">
    <button class="filter-btn" data-filter="reels">Reels</button>
    <button class="filter-btn" data-filter="photos">Photos</button>
    <button class="filter-btn" data-filter="short">Short Film</button>
    <button class="filter-btn" data-filter="documentary">Documentary</button>
</div>
<div class="works-filter" id="reelsSubfilters">
    <button class="reels-filter-btn active" data-reel-filter="yayfest">YAYFEST</button> <!-- default active -->
    <button class="reels-filter-btn" data-reel-filter="azer">Azer Aydemir</button>
    <button class="reels-filter-btn" data-reel-filter="idea">İDEA</button>
    <button class="reels-filter-btn" data-reel-filter="others">OTHERS</button>
</div>
<div class="works-grid">
    <!-- Azer Aydemir Videos -->
    <div class="work-card" data-category="reels" data-subcategory="azer">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4">
        </video>
        <div class="work-overlay">
            <h3>Azer Aydemir</h3>
            <p>Seminar</p>
        </div>
    </div>
<div class="work-card" data-category="reels" data-subcategory="azer" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4" >
        </video>
        <div class="work-overlay">
            <h3>Azer Aydemir</h3>
            <p>Gala</p>
        </div>
            </div>
<div class="work-card" data-category="reels" data-subcategory="azer" style="display: block;">
    <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
        <source src="" type="video/mp4">
    </video>
    <div class="work-overlay">
                    <h3>Azer Aydemir</h3>
                     <p>Haydar Aliyev Center|Cinema Talks</p>
                </div>
             </div>
<div class="work-card" data-category="reels" data-subcategory="azer" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4">
        </video>
        <div class="work-overlay">
            <h3>Azer Aydemir</h3>
            <p>Sea Breeze|Cigars advertisement</p>
        </div>
    </div>
    <div class="work-card" data-category="reels" data-subcategory="azer" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4">
        </video>
            <div class="work-overlay">
                <h3>Azer Aydemir</h3>
                <p>Cigars advertisement</p>
            </div>
        </div>
    <div class="work-card" data-category="reels" data-subcategory="azer" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4">
        </video>
        <div class="work-overlay">
            <h3>Azer Aydemir</h3>
            <p>JW MARRIOT| BiGroup&AsGroup</p>
        </div>
    </div>
    <div class="work-card" data-category="reels" data-subcategory="yayfest" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source
                src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/yayfest.mp4"
                type="video/mp4"></video>
                    <div class="work-overlay">
                        <h3>YayFest</h3>
                        <p>The biggest youth festival of Azerbaijan</p>
                    </div>
                </div>
                <div class="work-card" data-category="reels" data-subcategory="yayfest" style="display: block;">
                    <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                        <source
                            src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/partytime.mp4"
                            type="video/mp4"></video>
                        <div class="work-overlay">
                            <h3>YayFest</h3>
                            <p>Party Time</p>
                        </div>
                    </div>
                    <div class="work-card" data-category="reels" data-subcategory="yayfest" style="display: block;">
                        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                            <source
                                src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/going.mp4"
                                type="video/mp4"></video>
                            <div class="work-overlay">
                                <h3>YayFest</h3>
                                <p>Going to YayFest</p>
                            </div>
                        </div>

                        <div class="work-card" data-category="reels" data-subcategory="yayfest" style="display: block;">
                            <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                                <source src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/yayfest%20ilkin.mp4" type="video/mp4"></video>
                                <div class="work-overlay">
                                    <h3>YayFest</h3>
                                    <p>Ilkin Hasani</p>
                                </div>
                            </div>
            <div class="work-card" data-category="reels" data-subcategory="idea" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4"></video>
            <div class="work-overlay">
                <h3>IDEA</h3>
                <p>The project under initiative of Leyla Aliyeva</p><br>
                <p>Cleaning Beachsides</p>
            </div>
        </div>
        <div class="work-card" data-category="reels" data-subcategory="others" style="display: block;">
            <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                <source src="" type="video/mp4"></video>
            <div class="work-overlay">
                <h3>Weeding</h3>
                <p>Happy Marriage</p>
            </div>
        </div>
        <div class="work-card" data-category="reels" data-subcategory="others" style="display: block;">
            <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                <source src="" type="video/mp4"></video>
            <div class="work-overlay">
                                                <h3>COP29</h3>
                                                <p>Backstage of COP29</p>
                                            </div>
                                        </div>
                                        <div class="work-card" data-category="reels" data-subcategory="others" style="display: block;">
                                            <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                                                <source src="" type="video/mp4"></video>
                                                <div class="work-overlay">
                                                    <h3>Paster</h3>
                                                    <p>Azerbaijani Rapper</p>
                                                </div>
                                            </div>
                                        <div class="work-card" data-category="reels" data-subcategory="others" style="display: block;">
                                            <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
                                                <source src="" type="video/mp4"></video>
                                                <div class="work-overlay">
                                                    <h3>Backstage</h3>
                                                    <p>Weather forecast</p>
                                                </div>
                                            </div>


            <div class="work-card" data-category="reels" data-subcategory="others" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4"></video>
            <div class="work-overlay">
                <h3>Parallax</h3>
                <p>Backstage of Parallax</p>
            </div>
        </div>

            <div class="work-card" data-category="reels" data-subcategory="others" style="display: block;">
        <video class="work-video" muted loop playsinline webkit-playsinline preload="none">
            <source src="" type="video/mp4" ></video>
            <div class="work-overlay">
                <h3>BMW</h3>
                <p>Power Meets Style</p>
            </div>
        </div>


<div class="work-card" data-category="photos">
    <img class="work-image" src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/5J9A3080.jpg" alt="IDEA">
    <div class="work-overlay">
        <h3>IDEA</h3>
        <p>The project under initiative of Leyla Aliyeva </p>
    </div>
</div>
<div class="work-card" data-category="photos">
    <img class="work-image" src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/_MG_0052.jpg" alt="IDEA">
    <div class="work-overlay">
                <h3>IDEA</h3>
                <p>The project under initiative of Leyla Aliyeva</p><br>
                <p>Cleaning Beachsides</p>
    </div>
</div>
<div class="work-card" data-category="photos">
    <img class="work-image" src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/_MG_0371.jpg" alt="IDEA ">
    <div class="work-overlay">
    <h3>IDEA</h3>
    <p>The project under initiative of Leyla Aliyeva</p><br>
    <p>Cleaning Beachsides</p>
    </div>
</div>
<div class="work-card" data-category="photos">
    <img class="work-image" src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/IMG_6027.jpg" alt="IDEA">
    <div class="work-overlay">
    <h3>IDEA</h3>
    <p>The project under initiative of Leyla Aliyeva</p><br>
    <p>Cleaning Beachsides</p>
    </div>
</div>
<div class="work-card" data-category="photos">
    <img class="work-image" src="https://pub-85bfca0674ab4b4b9679847e5eee499c.r2.dev/IMG_6428.jpg" alt="IDEA|Bizim Metbex">
    <div class="work-overlay">
        <h3>IDEA</h3>
        <p>The project under initiative of Leyla Aliyeva</p><br>
        <p>Bizim Metbex</p>
    </div>
</div>

<div class="work-card video-card" data-category="short">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/cGC4eqMTSa0?si=c2uQg6QCVvAyQAj4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
    </section>
        <section id="contact" class="section">
        <h2 class="section-title">Contact</h2>
        <div class="contact-content">
            <div class="contact-item">
                <div class="contact-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="contact-info">
                    eminiyazli@gmail.com
                </div>
            </div>
            
            <div class="contact-item">
                <div class="contact-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <div class="contact-info">
                   +994 992 15 15 14
                </div>
            </div>
            
            <div class="contact-item">
                <div class="contact-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="contact-info">
                    Sumgayit, Azerbaijan
                </div>
            </div>
        </div>
        
        <div class="social-links">
            <a href="#" class="social-link" title="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-link" title="YouTube">
                <i class="fab fa-youtube"></i>
            </a>
            <a href="#" class="social-link" title="Whatsapp">
                <i class="fab fa-whatsapp"></i>
            </a>
            <a href="#" class="social-link" title="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </div>
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    console.log('🎯 Section-based Video Lazy Loading başlayır...');
    
    // ===============================
    // 1. VİDEO KATEQORİYALARI
    // ===============================
    
    const videoSections = {
        'welcome': {
            loaded: false,
            selectors: [
                '.hero-video',
                '.welcome-section video',
                '#hero video',
                '[class*="hero"] video'
            ]
        },
        'featured': {
            loaded: false,
            selectors: [
                '.featured-reels video',
                '.featured-section video',
                '[class*="featured"] video',
                '.reel-card video' // Featured reels kartları
            ]
        },
        'reels': {
            loaded: false,
            selectors: [
                '.reels-section video',
                '#reels video',
                '[data-category="reels"] video',
                '.work-card[data-category="reels"] video'
            ]
        },
        'works': {
            loaded: false,
            selectors: [
                '.works-section video',
                '.work-section video',
                '#works video',
                '.work-card video:not([data-category="reels"])'
            ]
        },
        'about': {
            loaded: false,
            selectors: [
                '.about-section video',
                '#about video'
            ]
        }
    };
    
    // ===============================
    // 2. İLK YÜKLƏMƏ - SADƏCƏ WELCOME VƏ FEATURED
    // ===============================
    
    function loadInitialVideos() {
        console.log('🚀 İlk videolar yüklənir: Welcome və Featured');
        
        // Welcome section videolarını yüklə
        loadSectionVideos('welcome');
        
        // Featured reels videolarını yüklə  
        loadSectionVideos('featured');
        
        // Digər sectionların videolarını gizlə
        hideSectionVideos(['reels', 'works', 'about']);
    }
    
    // ===============================
    // 3. SECTİON VİDEOLARINI YÜKLƏMƏ
    // ===============================
    
    function loadSectionVideos(sectionName) {
        if (!videoSections[sectionName]) {
            console.warn(`⚠️ Section tapılmadı: ${sectionName}`);
            return;
        }
        
        if (videoSections[sectionName].loaded) {
            console.log(`✅ ${sectionName} artıq yüklənib`);
            return;
        }
        
        console.log(`📥 ${sectionName} section videoları yüklənir...`);
        
        const selectors = videoSections[sectionName].selectors;
        let loadedCount = 0;
        
        selectors.forEach(selector => {
            const videos = document.querySelectorAll(selector);
            
            videos.forEach((video, index) => {
                // Artıq yüklənib?
                if (video.src || video.dataset.loaded === 'true') {
                    return;
                }
                
                // data-src-dan src-a köçür
                if (video.dataset.src) {
                    console.log(`🎬 Video yüklənir: ${sectionName} - ${selector} [${index}]`);
                    video.src = video.dataset.src;
                    video.load();
                    video.dataset.loaded = 'true';
                    loadedCount++;
                }
                
                // Source tagları üçün
                const sources = video.querySelectorAll('source[data-src]');
                sources.forEach(source => {
                    if (source.dataset.src && !source.src) {
                        source.src = source.dataset.src;
                        video.load();
                        loadedCount++;
                    }
                });
            });
        });
        
        videoSections[sectionName].loaded = true;
        console.log(`✅ ${sectionName} tamamlandı: ${loadedCount} video yükləndi`);
    }
    
    // ===============================
    // 4. SECTİON VİDEOLARINI GİZLƏMƏ
    // ===============================
    
    function hideSectionVideos(sectionNames) {
        sectionNames.forEach(sectionName => {
            if (!videoSections[sectionName]) return;
            
            const selectors = videoSections[sectionName].selectors;
            
            selectors.forEach(selector => {
                const videos = document.querySelectorAll(selector);
                
                videos.forEach(video => {
                    // Src-i data-src-ə köçür (əgər artıq data-src yoxdursa)
                    if (video.src && !video.dataset.src) {
                        video.dataset.src = video.src;
                        video.removeAttribute('src');
                        video.load();
                    }
                    
                    // Source tagları üçün
                    const sources = video.querySelectorAll('source[src]');
                    sources.forEach(source => {
                        if (source.src && !source.dataset.src) {
                            source.dataset.src = source.src;
                            source.removeAttribute('src');
                        }
                    });
                    
                    if (sources.length > 0) {
                        video.load();
                    }
                });
            });
            
            console.log(`🙈 ${sectionName} videoları gizləndi (memory save)`);
        });
    }
    
    // ===============================
    // 5. SECTİON VİSİBİLİTY OBSERVER
    // ===============================
    
    const sectionObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const sectionElement = entry.target;
                const sectionName = getSectionName(sectionElement);
                
                if (sectionName) {
                    console.log(`👁️ Section görünür: ${sectionName}`);
                    loadSectionVideos(sectionName);
                }
            }
        });
    }, {
        threshold: 0.1, // 10% görünəndə yüklə
        rootMargin: '50px' // 50px əvvəl yüklə
    });
    
    // ===============================
    // 6. SECTİON ADINI MÜƏYYƏN ETMƏ
    // ===============================
    
    function getSectionName(element) {
        // ID-dən
        if (element.id) {
            const id = element.id.toLowerCase();
            if (videoSections[id]) return id;
        }
        
        // Class-dan
        const classList = element.className.toLowerCase();
        
        if (classList.includes('reels')) return 'reels';
        if (classList.includes('works') || classList.includes('work')) return 'works';
        if (classList.includes('about')) return 'about';
        if (classList.includes('hero') || classList.includes('welcome')) return 'welcome';
        if (classList.includes('featured')) return 'featured';
        
        return null;
    }
    
    // ===============================
    // 7. SECTİON ELEMENTLƏRINI TAPMA VƏ OBSERVE ETMƏ
    // ===============================
    
    function observeSections() {
        console.log('👀 Sectionlar observe edilir...');
        
        // Sectionları tap
        const sections = document.querySelectorAll(`
            #reels, #works, #about,
            .reels-section, .works-section, .about-section,
            .section, section,
            [class*="reels"], [class*="works"], [class*="about"]
        `);
        
        console.log(`📊 Tapılan section sayı: ${sections.length}`);
        
        sections.forEach(section => {
            const sectionName = getSectionName(section);
            if (sectionName && sectionName !== 'welcome' && sectionName !== 'featured') {
                console.log(`🔍 Observe edilir: ${sectionName}`);
                sectionObserver.observe(section);
            }
        });
    }
    
    // ===============================
    // 8. NAVİQASİYA CLİCK HANDLERİ
    // ===============================
    
    function setupNavigationHandlers() {
        console.log('🧭 Naviqasiya handlerləri qurulur...');
        
        // Naviqasiya linklərini tap
        const navLinks = document.querySelectorAll(`
            a[href*="#reels"], a[href*="#works"], a[href*="#about"],
            .filter-btn, .nav-link, .menu-link,
            [data-section], [data-filter]
        `);
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                const section = this.getAttribute('data-section') || 
                               this.getAttribute('data-filter');
                
                let targetSection = null;
                
                // href-dən section müəyyən et
                if (href && href.includes('#')) {
                    targetSection = href.replace('#', '').toLowerCase();
                }
                
                // data atributlarından
                if (!targetSection && section) {
                    targetSection = section.toLowerCase();
                }
                
                // Text-dən
                if (!targetSection) {
                    const text = this.textContent.toLowerCase().trim();
                    if (text.includes('reels')) targetSection = 'reels';
                    else if (text.includes('works') || text.includes('work')) targetSection = 'works';
                    else if (text.includes('about')) targetSection = 'about';
                }
                
                if (targetSection && videoSections[targetSection]) {
                    console.log(`🎯 Naviqasiya: ${targetSection} section-ına keçid`);
                    
                    // Klik edilən section-ı dərhal yüklə
                    setTimeout(() => {
                        loadSectionVideos(targetSection);
                    }, 100);
                }
            });
        });
        
        console.log(`✅ ${navLinks.length} naviqasiya linki quruldu`);
    }
    
    // ===============================
    // 9. HASH DEYİŞİKLİYİ HANDLERİ
    // ===============================
    
    function setupHashChangeHandler() {
        window.addEventListener('hashchange', function() {
            const hash = window.location.hash.replace('#', '').toLowerCase();
            
            if (videoSections[hash]) {
                console.log(`#️⃣ Hash dəyişdi: ${hash}`);
                loadSectionVideos(hash);
            }
        });
        
        // İlk yüklənmədə hash yoxla
        const initialHash = window.location.hash.replace('#', '').toLowerCase();
        if (initialHash && videoSections[initialHash]) {
            console.log(`🎯 İlk hash: ${initialHash}`);
            setTimeout(() => {
                loadSectionVideos(initialHash);
            }, 500);
        }
    }
    
    // ===============================
    // 10. MANUAL YÜKLƏMƏ FUNKSİYALARI
    // ===============================
    
    window.loadSectionVideos = loadSectionVideos;
    window.preloadAllVideos = function() {
        console.log('🚀 Bütün videolar force yüklənir...');
        Object.keys(videoSections).forEach(section => {
            loadSectionVideos(section);
        });
    };
    
    // ===============================
    // 11. İNİTİALİZASİYA
    // ===============================
    
    function initializeLazyVideoSystem() {
        console.log('🎬 Lazy Video System başlayır...');
        
        // 1. İlk videolar (Welcome + Featured)
        loadInitialVideos();
        
        // 2. Section observe sistemi
        setTimeout(observeSections, 500);
        
        // 3. Naviqasiya handlerləri
        setTimeout(setupNavigationHandlers, 800);
        
        // 4. Hash change handlerləri
        setupHashChangeHandler();
        
        console.log('✅ Lazy Video System hazırdır!');
        console.log('🎯 Manual yükləmə: loadSectionVideos("reels") və ya preloadAllVideos()');
    }
    
    // Başlat
    initializeLazyVideoSystem();
    
    // Debug məlumatı
    window.videoSectionStatus = function() {
        console.table(videoSections);
    };
});

console.log('🎬 Section-based Video Lazy Loading sistemi başladı');
document.addEventListener('DOMContentLoaded', function() {
    console.log('JavaScript loaded successfully');
    let activeRequests = 0;
const maxConcurrent = 3;
const queue = [];

function loadMedia(el) {
  if (activeRequests >= maxConcurrent) {
    queue.push(el);
    return;
  }
  activeRequests++;
  el.src = el.dataset.src;
  if (el.tagName.toLowerCase() === "video") el.load();
  el.addEventListener("loadeddata", () => {
    activeRequests--;
    if (queue.length > 0) loadMedia(queue.shift());
  });
}

// Performance optimization variables
let isScrolling = false;
let resizeTimeout = null;
let animationFrame = null;

    // ===============================
    // 1. LOADER - IMPROVED WITH HIDDEN SCROLLBAR
    // ===============================
    window.addEventListener('load', () => {
        setTimeout(() => {
            const loader = document.querySelector('.loader');
            if (loader) {
                loader.classList.add('fade-out');
                document.body.classList.remove('loading');
                
                // Force enable scroll after loader with hidden scrollbar
                document.body.style.overflow = 'auto';
                document.body.style.overflowY = 'auto';
                document.body.style.overflowX = 'hidden';
                document.documentElement.style.overflow = 'auto';
                document.documentElement.style.overflowX = 'hidden';
                
                setTimeout(() => {
                    loader.style.display = 'none';
                    // Double check scroll is enabled with hidden scrollbar
                    document.body.style.overflow = 'auto';
                    document.body.style.overflowY = 'auto';
                    document.body.style.overflowX = 'hidden';
                }, 500);
            }
        }, 3000);
    });

    // ===============================
    // 2. WELCOME TEXT EVAPORATION - OPTIMIZED
    // ===============================
    function initWelcomeEvaporation() {
        const welcomeText = document.querySelector('.hero-title') || 
                          document.querySelector('h1') || 
                          document.querySelector('[class*="welcome"]') ||
                          document.querySelector('[class*="hero-title"]');
        
        if (welcomeText) {
            // Split text into letters with requestAnimationFrame
            const text = welcomeText.textContent;
            welcomeText.innerHTML = '';
            
            requestAnimationFrame(() => {
                [...text].forEach((letter, index) => {
                    const span = document.createElement('span');
                    span.className = 'letter';
                    span.textContent = letter === ' ' ? '\u00A0' : letter;
                    span.style.animationDelay = `${index * 0.05}s`;
                    welcomeText.appendChild(span);
                });
            });
            
            // Start evaporation after 10 seconds
            setTimeout(() => {
                requestAnimationFrame(() => {
                    welcomeText.classList.add('evaporating');
                });
                
                // Optional: Remove element completely after animation
                setTimeout(() => {
                    welcomeText.style.display = 'none';
                }, 3000);
            }, 10000);
        }
    }
    
    // Initialize welcome evaporation
    requestAnimationFrame(() => {
        initWelcomeEvaporation();
    });

    // ===============================
    // 3. CUSTOM CURSOR - OPTIMIZED
    // ===============================
    const cursor = document.querySelector('.custom-cursor');
    if (cursor && window.innerWidth > 480) {
        const hoverElements = document.querySelectorAll('a, button, .reel-card, .work-card, .lightbox-trigger, img');
        let cursorX = 0, cursorY = 0;
        
        // Throttled cursor movement
        const updateCursor = throttle((e) => {
            cursorX = e.clientX - 8;
            cursorY = e.clientY - 8;
            cursor.style.transform = `translate3d(${cursorX}px, ${cursorY}px, 0)`;
        }, 16);
        
        document.addEventListener('mousemove', updateCursor, { passive: true });

        hoverElements.forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hover'), { passive: true });
            el.addEventListener('mouseleave', () => cursor.classList.remove('hover'), { passive: true });
        });
    }

    // ===============================
    // 4. MOBILE MENU - OPTIMIZED
    // ===============================
    const hamburger = document.querySelector('.hamburger');
    const mobileMenu = document.querySelector('.mobile-menu');
    
    if (hamburger && mobileMenu) {
        hamburger.addEventListener('click', function(e) {
            e.preventDefault();
            const isActive = hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            
            // Only hide scroll when mobile menu is active
            if (isActive) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
                document.body.style.overflowY = 'auto';
                document.body.style.overflowX = 'hidden';
            }
        }, { passive: false });

        // Close menu on link click
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function(e) {
                hamburger.classList.remove('active');
                mobileMenu.classList.remove('active');
                document.body.style.overflow = 'auto';
                document.body.style.overflowY = 'auto';
                document.body.style.overflowX = 'hidden';
            }, { passive: true });
        });
    }

    // ===============================
    // 5. NAVIGATION SCROLL - COMPLETELY OPTIMIZED
    // ===============================
    
    // Cache DOM elements
    const navbar = document.getElementById('navbar') || 
                  document.querySelector('.navbar') || 
                  document.querySelector('nav') || 
                  document.querySelector('.nav') ||
                  document.querySelector('[class*="nav"]');
    
    const progressBar = document.querySelector('.scroll-progress') ||
                       document.querySelector('.progress-bar') ||
                       document.querySelector('[class*="progress"]');
    
    // Cached values for performance
    let windowHeight = window.innerHeight;
    let documentHeight = Math.max(
        document.body.scrollHeight,
        document.body.offsetHeight,
        document.documentElement.clientHeight,
        document.documentElement.scrollHeight,
        document.documentElement.offsetHeight
    );
    let maxScroll = documentHeight - windowHeight;
    
   

    // ===============================
    // 6. SMOOTH SCROLL - OPTIMIZED
    // ===============================
    
    // Cache smooth scroll function
    const smoothScrollTo = (target) => {
        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset;
        const startPosition = window.pageYOffset;
        const distance = targetPosition - startPosition;
        const duration = 800; // Reduced for better performance
        let start = null;
        
        function animation(currentTime) {
            if (start === null) start = currentTime;
            const timeElapsed = currentTime - start;
            const run = easeInOutQuad(timeElapsed, startPosition, distance, duration);
            window.scrollTo(0, run);
            if (timeElapsed < duration) requestAnimationFrame(animation);
        }
        
        function easeInOutQuad(t, b, c, d) {
            t /= d/2;
            if (t < 1) return c/2*t*t + b;
            t--;
            return -c/2 * (t*(t-2) - 1) + b;
        }
        
        requestAnimationFrame(animation);
    };
    
    // Attach to anchor links with event delegation
    document.addEventListener('click', function(e) {
        const anchor = e.target.closest('a[href^="#"]');
        if (!anchor) return;
        
        e.preventDefault();
        const targetId = anchor.getAttribute('href');
        const target = document.querySelector(targetId);
        
        if (target) {
            if ('scrollBehavior' in document.documentElement.style) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                smoothScrollTo(target);
            }
        }
    }, { passive: false });

    // ===============================
    // 7. SECTION ANIMATIONS - OPTIMIZED
    // ===============================
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                requestAnimationFrame(() => {
                    entry.target.classList.add('visible');
                });
            }
        });
    }, {
        threshold: 0.15,
        rootMargin: '0px 0px -100px 0px'
    });

    // Use requestAnimationFrame for DOM queries
    requestAnimationFrame(() => {
        document.querySelectorAll('.section').forEach(section => {
            observer.observe(section);
        });
    });
// ===============================
// iOS VİDEO HOVER PREVIEW FIX
// Bu kod mövcud reel cards və work cards kodunu əvəz edir
// ===============================

document.addEventListener('DOMContentLoaded', function() {
    console.log('📱 iOS Video Hover Preview Fix başlayır...');
    
    // iOS/Mobile cihaz müəyyənləşdirmə
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    
    console.log(`📱 Device: iOS=${isIOS}, Mobile=${isMobile}, Touch=${isTouchDevice}`);
    
    // ===============================
    // 1. VİDEO PRELOAD DÜZƏLTMƏ (iOS ÜÇÜN)
    // ===============================
    
    function fixVideoPreloading() {
        const videos = document.querySelectorAll('video');
        
        videos.forEach((video, index) => {
            // iOS üçün preload="none" problemi
            if (isIOS || isMobile) {
                if (video.getAttribute('preload') === 'none') {
                    video.setAttribute('preload', 'metadata');
                    console.log(`🔧 Video ${index}: preload none → metadata (iOS fix)`);
                }
            }
            
            // iOS üçün vacib atributlar
            video.setAttribute('playsinline', '');
            video.setAttribute('webkit-playsinline', '');
            video.muted = true; // Səssiz olmalı hover preview üçün
            
            // First frame yükləmək üçün
            if (video.readyState < 1) {
                video.load();
            }
        });
    }
    
    // ===============================
    // 2. UNIVERSAL HOVER/TOUCH PREVIEW SİSTEMİ
    // ===============================
    
    function setupUniversalVideoPreview() {
        // Həm reel cards həm də work cards
        const videoCards = document.querySelectorAll('.reel-card, .work-card');
        
        console.log(`🎬 ${videoCards.length} video kart tapıldı`);
        
        videoCards.forEach((card, index) => {
            const video = card.querySelector('video, .reel-video, .work-video');
            if (!video) return;
            
            let isPlaying = false;
            let playPromise = null;
            
            // ===============================
            // DESKTOP: Mouse Events
            // ===============================
            
            if (!isTouchDevice) {
                // Mouse enter
                card.addEventListener('mouseenter', function() {
                    startVideoPreview(video, index, 'mouseenter');
                }, { passive: true });
                
                // Mouse leave  
                card.addEventListener('mouseleave', function() {
                    stopVideoPreview(video, index, 'mouseleave');
                }, { passive: true });
            }
            
            // ===============================
            // MOBILE/iOS: Touch Events
            // ===============================
            
            if (isTouchDevice) {
                let touchStartTime = 0;
                let longPressTimer = null;
                
                // Touch start - uzun basma üçün
                card.addEventListener('touchstart', function(e) {
                    touchStartTime = Date.now();
                    
                    // 300ms sonra video preview göstər
                    longPressTimer = setTimeout(() => {
                        startVideoPreview(video, index, 'longpress');
                    }, 300);
                    
                }, { passive: true });
                
                // Touch end
                card.addEventListener('touchend', function(e) {
                    const touchDuration = Date.now() - touchStartTime;
                    
                    // Long press timer-i sil
                    if (longPressTimer) {
                        clearTimeout(longPressTimer);
                        longPressTimer = null;
                    }
                    
                    // Əgər qısa toxunma idisə (tap), modal aç
                    if (touchDuration < 300 && !isPlaying) {
                        // Bu, klik event-i üçün normaldır - modal açılacaq
                        console.log(`👆 Tap detected: ${index} - modal açılacaq`);
                        return;
                    }
                    
                    // Uzun basma idisə, preview-ı dayandır
                    if (isPlaying) {
                        stopVideoPreview(video, index, 'touchend');
                    }
                    
                }, { passive: true });
                
                // Touch cancel
                card.addEventListener('touchcancel', function() {
                    if (longPressTimer) {
                        clearTimeout(longPressTimer);
                        longPressTimer = null;
                    }
                    if (isPlaying) {
                        stopVideoPreview(video, index, 'touchcancel');
                    }
                }, { passive: true });
            }
            
            // Video preview funksiyaları
            function startVideoPreview(video, index, trigger) {
                if (isPlaying || !video) return;
                
                console.log(`▶️ Video preview start: ${index} (${trigger})`);
                
                video.muted = true;
                video.currentTime = 0;
                
                playPromise = video.play();
                
                if (playPromise) {
                    playPromise.then(() => {
                        isPlaying = true;
                        console.log(`✅ Video ${index} oynayır (${trigger})`);
                    }).catch(error => {
                        console.log(`⚠️ Video ${index} play error:`, error.message);
                        isPlaying = false;
                        playPromise = null;
                    });
                } else {
                    isPlaying = true;
                }
            }
            
            function stopVideoPreview(video, index, trigger) {
                if (!isPlaying || !video) return;
                
                console.log(`⏸️ Video preview stop: ${index} (${trigger})`);
                
                if (playPromise) {
                    playPromise.then(() => {
                        video.pause();
                        video.currentTime = 0;
                        isPlaying = false;
                        playPromise = null;
                    }).catch(() => {
                        video.pause();
                        video.currentTime = 0;
                        isPlaying = false;
                        playPromise = null;
                    });
                } else {
                    video.pause();
                    video.currentTime = 0;
                    isPlaying = false;
                }
            }
        });
    }
    
    // ===============================
    // 3. KÖHNƏ EVENT LISTENER-LƏRI TƏMİZLƏMƏ
    // ===============================
    
    function cleanupOldVideoEvents() {
        console.log('🧹 Köhnə video event-lər təmizlənir...');
        
        const videoCards = document.querySelectorAll('.reel-card, .work-card');
        
        videoCards.forEach(card => {
            // Kartı klonla və əvəzlə (bütün event-lər təmizlənsin)
            const newCard = card.cloneNode(true);
            card.parentNode.replaceChild(newCard, card);
        });
        
        console.log('✅ Köhnə event-lər təmizləndi');
    }
    
    // ===============================
    // 4. İNTERVAL İLE YOXLAMA (YENİ KARTLAR ÜÇÜN)
    // ===============================
    
    function setupPeriodicCheck() {
        let lastCardCount = 0;
        
        setInterval(() => {
            const currentCardCount = document.querySelectorAll('.reel-card, .work-card').length;
            
            if (currentCardCount !== lastCardCount) {
                console.log(`🔄 Yeni kartlar tapıldı: ${lastCardCount} → ${currentCardCount}`);
                
                // Yenidən setup et
                setTimeout(() => {
                    fixVideoPreloading();
                    setupUniversalVideoPreview();
                }, 100);
                
                lastCardCount = currentCardCount;
            }
        }, 2000); // Hər 2 saniyədə yoxla
    }
    
    // ===============================
    // 5. İNİTİALİZASİYA
    // ===============================
    
    function initializeVideoPreviewFix() {
        console.log('🚀 Video Preview Fix başlayır...');
        
        // 1. Video preload düzəlt
        fixVideoPreloading();
        
        // 2. Köhnə event-ləri təmizlə
        setTimeout(cleanupOldVideoEvents, 100);
        
        // 3. Yeni preview sistemi qur
        setTimeout(setupUniversalVideoPreview, 200);
        
        // 4. Periodic yoxlama başlat
        setTimeout(setupPeriodicCheck, 1000);
        
        console.log('✅ Video Preview Fix hazırdır!');
        
        // Mobil üçün istifadə təlimatı
        if (isTouchDevice) {
            console.log('📱 Mobil cihaz: Video preview üçün kartı 300ms basıb saxlayın');
        }
    }
    
    // Başlat
    initializeVideoPreviewFix();
    
    // Global yenidən başlatma funksiyası
    window.fixVideoPreview = initializeVideoPreviewFix;
    
    // Debug funksiyaları
    window.testVideoPreview = function() {
        const videos = document.querySelectorAll('video');
        videos.forEach((video, i) => {
            console.log(`Video ${i}:`, {
                preload: video.preload,
                readyState: video.readyState,
                muted: video.muted,
                playsinline: video.hasAttribute('playsinline')
            });
        });
    };
});

console.log('📱 iOS Video Hover Preview Fix yükləndi!');
   
    // ===============================
    // 9. LIGHTBOX FOR IMAGES - OPTIMIZED
    // ===============================
    
    // Create lightbox HTML once
    function createLightbox() {
        if (document.getElementById('imageLightbox')) return;
        
        const lightbox = document.createElement('div');
        lightbox.innerHTML = `
            <div class="image-lightbox" id="imageLightbox">
                <div class="lightbox-overlay"></div>
                <div class="lightbox-container">
                    <button class="lightbox-close" aria-label="Close image">&times;</button>
                    <button class="lightbox-prev" aria-label="Previous image">&#8249;</button>
                    <button class="lightbox-next" aria-label="Next image">&#8250;</button>
                    <div class="lightbox-content">
                        <img id="lightboxImage" src="" alt="" />
                        <div class="lightbox-info">
                            <h3 id="lightboxTitle"></h3>
                            <p id="lightboxDescription"></p>
                            <span class="lightbox-counter"><span id="currentImage">1</span> / <span id="totalImages">1</span></span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(lightbox);
    }

    // Add lightbox styles once
    function addLightboxStyles() {
        if (document.getElementById('lightbox-styles')) return;
        
        const style = document.createElement('style');
        style.id = 'lightbox-styles';
        style.textContent = `
            .image-lightbox {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                z-index: 10000;
                display: none;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            .image-lightbox.active {
                display: flex !important;
                opacity: 1;
            }
            .lightbox-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }
            .lightbox-container {
                position: relative;
                width: 90%;
                max-width: 1200px;
                max-height: 90vh;
                z-index: 10001;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .lightbox-close {
                position: absolute;
                top: -60px;
                right: 0;
                background: #FFA500;
                color: #000;
                border: none;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 24px;
                font-weight: bold;
                z-index: 10002;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .lightbox-close:hover {
                background: #ff8c00;
                transform: scale(1.1);
            }
            .lightbox-prev, .lightbox-next {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(255, 165, 0, 0.8);
                color: #000;
                border: none;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 24px;
                font-weight: bold;
                z-index: 10002;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .lightbox-prev {
                left: -70px;
            }
            .lightbox-next {
                right: -70px;
            }
            .lightbox-prev:hover, .lightbox-next:hover {
                background: #FFA500;
                transform: translateY(-50%) scale(1.1);
            }
            .lightbox-content {
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                animation: lightboxZoomIn 0.3s ease;
            }
            .lightbox-content img {
                max-width: 100%;
                max-height: 70vh;
                object-fit: contain;
                border-radius: 8px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            }
            .lightbox-info {
                margin-top: 20px;
                text-align: center;
                color: white;
                max-width: 600px;
            }
            .lightbox-info h3 {
                margin: 0 0 10px 0;
                font-size: 1.5rem;
                color: #FFA500;
            }
            .lightbox-info p {
                margin: 0 0 15px 0;
                line-height: 1.5;
                opacity: 0.9;
            }
            .lightbox-counter {
                font-size: 0.9rem;
                opacity: 0.7;
                background: rgba(255, 165, 0, 0.2);
                padding: 5px 15px;
                border-radius: 20px;
                border: 1px solid rgba(255, 165, 0, 0.3);
            }
            
            @keyframes lightboxZoomIn {
                from {
                    opacity: 0;
                    transform: scale(0.8);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }
            
            /* Mobile responsive */
            @media (max-width: 768px) {
                .lightbox-container {
                    width: 95%;
                }
                .lightbox-close {
                    top: -50px;
                    right: -10px;
                    width: 40px;
                    height: 40px;
                    font-size: 20px;
                }
                .lightbox-prev, .lightbox-next {
                    width: 40px;
                    height: 40px;
                    font-size: 20px;
                }
                .lightbox-prev {
                    left: -50px;
                }
                .lightbox-next {
                    right: -50px;
                }
                .lightbox-content img {
                    max-height: 60vh;
                }
                .lightbox-info h3 {
                    font-size: 1.2rem;
                }
                .lightbox-info p {
                    font-size: 0.9rem;
                }
            }
            
            .lightbox-trigger {
                cursor: pointer;
                transition: transform 0.2s ease, filter 0.2s ease;
                will-change: transform, filter;
            }
            .lightbox-trigger:hover {
                transform: scale(1.05);
                filter: brightness(1.1);
            }
        `;
        document.head.appendChild(style);
    }

    // Initialize lightbox
    addLightboxStyles();
    createLightbox();

    // Lightbox functionality with caching
    let currentImageIndex = 0;
    let lightboxImages = [];
    let lightboxInitialized = false;

    function setupLightbox() {
        if (lightboxInitialized) return;
        
        requestAnimationFrame(() => {
            const images = document.querySelectorAll('img:not(.no-lightbox):not([class*="logo"]):not([class*="icon"])');
            lightboxImages = Array.from(images);
            
            // Use event delegation instead of individual listeners
            document.addEventListener('click', function(e) {
                const img = e.target.closest('.lightbox-trigger');
                if (!img) return;
                
                e.preventDefault();
                e.stopPropagation();
                
                const index = lightboxImages.indexOf(img);
                if (index !== -1) {
                    openLightbox(index);
                }
            }, { passive: false });
            
            // Add classes
            lightboxImages.forEach(img => {
                img.classList.add('lightbox-trigger');
            });
            
            lightboxInitialized = true;
            console.log(`âœ… Lightbox setup complete! Found ${lightboxImages.length} images`);
        });
    }

    // Cached DOM elements for lightbox
    let lightboxElements = null;
    
    function getLightboxElements() {
        if (!lightboxElements) {
            lightboxElements = {
                lightbox: document.getElementById('imageLightbox'),
                img: document.getElementById('lightboxImage'),
                title: document.getElementById('lightboxTitle'),
                description: document.getElementById('lightboxDescription'),
                current: document.getElementById('currentImage'),
                total: document.getElementById('totalImages'),
                prev: document.querySelector('.lightbox-prev'),
                next: document.querySelector('.lightbox-next')
            };
        }
        return lightboxElements;
    }

    function openLightbox(index) {
        currentImageIndex = index;
        const img = lightboxImages[currentImageIndex];
        const elements = getLightboxElements();
        
        if (elements.lightbox && elements.img && img) {
            requestAnimationFrame(() => {
                // Set image
                elements.img.src = img.src || img.dataset.src;
                elements.img.alt = img.alt || '';
                
                // Set info
                elements.title.textContent = img.getAttribute('data-title') || img.alt || 'Image';
                elements.description.textContent = img.getAttribute('data-description') || '';
                
                // Update counter
                elements.current.textContent = currentImageIndex + 1;
                elements.total.textContent = lightboxImages.length;
                
                // Show lightbox
                elements.lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Handle navigation buttons
                const showNav = lightboxImages.length > 1;
                elements.prev.style.display = showNav ? 'flex' : 'none';
                elements.next.style.display = showNav ? 'flex' : 'none';
            });
        }
    }

    function closeLightbox() {
        const elements = getLightboxElements();
        if (elements.lightbox) {
            elements.lightbox.classList.remove('active');
            document.body.style.overflow = 'auto';
            document.body.style.overflowY = 'auto';
            document.body.style.overflowX = 'hidden';
        }
    }

    function nextImage() {
        if (lightboxImages.length > 1) {
            currentImageIndex = (currentImageIndex + 1) % lightboxImages.length;
            openLightbox(currentImageIndex);
        }
    }

    function prevImage() {
        if (lightboxImages.length > 1) {
            currentImageIndex = currentImageIndex === 0 ? lightboxImages.length - 1 : currentImageIndex - 1;
            openLightbox(currentImageIndex);
        }
    }

    // Setup lightbox events with event delegation
    function setupLightboxEvents() {
        document.addEventListener('click', function(e) {
            if (e.target.matches('.lightbox-close')) {
                closeLightbox();
            } else if (e.target.matches('.lightbox-overlay')) {
                closeLightbox();
            } else if (e.target.matches('.lightbox-prev')) {
                prevImage();
            } else if (e.target.matches('.lightbox-next')) {
                nextImage();
            }
        }, { passive: true });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const elements = getLightboxElements();
            if (elements.lightbox && elements.lightbox.classList.contains('active')) {
                switch(e.key) {
                    case 'Escape':
                        closeLightbox();
                        break;
                    case 'ArrowLeft':
                        prevImage();
                        break;
                    case 'ArrowRight':
                        nextImage();
                        break;
                }
            }
        }, { passive: true });
    }

    // Initialize lightbox
    setupLightbox();
    setupLightboxEvents();

    // ===============================
    // 10. WORK VIDEOS WITH MODAL - OPTIMIZED
    // ===============================
    
    // Create modal HTML once
    function createModal() {
        if (document.getElementById('videoModal')) return;
        
        const modal = document.createElement('div');
        modal.innerHTML = `
            <div class="video-modal" id="videoModal">
                <div class="video-modal-overlay"></div>
                <div class="video-modal-container">
                    <button class="video-modal-close" aria-label="Close video">&times;</button>
                    <button class="video-modal-prev" aria-label="Previous video">&#8249;</button>
                    <button class="video-modal-next" aria-label="Next video">&#8250;</button>
                    <div class="video-modal-content">
                        <video id="modalVideo" controls preload="metadata">
                            Your browser does not support the video tag.
                        </video>
                        <div class="video-modal-info">
                            <h3 id="videoTitle"></h3>
                            <p id="videoDescription"></p>
                            <span class="video-counter"><span id="currentVideo">1</span> / <span id="totalVideos">1</span></span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }

    // Add modal styles once
    function addModalStyles() {
        if (document.getElementById('modal-styles')) return;
        
        const style = document.createElement('style');
        style.id = 'modal-styles';
        style.textContent = `
            .video-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                z-index: 9999;
                display: none;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(5px);
            }
            .video-modal.active {
                display: flex !important;
            }
            .video-modal-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }
            .video-modal-container {
                position: relative;
                width: 90%;
                max-width: 1200px;
                max-height: 80vh;
                z-index: 10000;
            }
            .video-modal-close {
                position: absolute;
                top: -60px;
                right: 0;
                background: #FFA500;
                color: #000;
                border: none;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 24px;
                font-weight: bold;
                z-index: 10002;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .video-modal-close:hover {
                background: #ff8c00;
                transform: scale(1.1);
            }
            .video-modal-prev, .video-modal-next {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(255, 165, 0, 0.8);
                color: #000;
                border: none;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 24px;
                font-weight: bold;
                z-index: 10002;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .video-modal-prev {
                left: -70px;
            }
            .video-modal-next {
                right: -70px;
            }
            .video-modal-prev:hover, .video-modal-next:hover {
                background: #FFA500;
                transform: translateY(-50%) scale(1.1);
            }
            .video-modal-content {
                width: 100%;
                border-radius: 12px;
                overflow: hidden;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .video-modal-content video {
                width: 100%;
                height: auto;
                display: block;
                max-height: 70vh;
                object-fit: contain;
                border-radius: 8px 8px 0 0;
            }
            .video-modal-info {
                background: rgba(0, 0, 0, 0.8);
                padding: 20px;
                width: 100%;
                text-align: center;
                color: white;
                border-radius: 0 0 8px 8px;
            }
            .video-modal-info h3 {
                margin: 0 0 10px 0;
                font-size: 1.5rem;
                color: #FFA500;
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            .video-modal-info p {
                margin: 0 0 15px 0;
                line-height: 1.5;
                opacity: 0.9;
                font-size: 0.95rem;
            }
            .video-counter {
                font-size: 0.9rem;
                opacity: 0.7;
                background: rgba(255, 165, 0, 0.2);
                padding: 5px 15px;
                border-radius: 20px;
                border: 1px solid rgba(255, 165, 0, 0.3);
            }
            
            /* Work card hover effects - OPTIMIZED */
            .works-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
                padding: 40px;
                max-width: 1400px;
                margin: 0 auto;
            }

            .work-card {
                position: relative;
                overflow: hidden;
                border-radius: 12px;
                cursor: pointer;
                height: 300px;
                width: 100%;
                transition: all 0.3s ease;
                border: 2px solid transparent;
                will-change: transform, border-color, box-shadow;
            }

            .work-video {
                width: 100%;
                height: 100%;
                object-fit: cover;
                display: block;
                border-radius: 10px;
            }

            .work-overlay {
                position: absolute;
                bottom: 20px;
                left: 20px;
                right: auto;
                padding: 0;
                transform: translateY(20px);
                opacity: 0;
                transition: all 0.4s ease;
                color: white;
                pointer-events: none;
                will-change: transform, opacity;
            }

            .work-card:hover .work-overlay {
                transform: translateY(0);
                opacity: 1;
            }

            .work-overlay h3 {
                margin: 0 0 4px 0;
                font-size: 1.2rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 2px;
                color: #ffa500;
                line-height: 1.2;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            }

            .work-overlay p {
                margin: 0;
                font-size: 0.9rem;
                line-height: 1.3;
                opacity: 1;
                color: #ffffff;
                font-weight: 400;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            }

            .play-btn {
                display: none;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .works-grid {
                    grid-template-columns: 1fr;
                    padding: 20px;
                    gap: 15px;
                }
                
                .work-card {
                    height: 250px;
                }
                
                .work-overlay {
                    bottom: 15px;
                    left: 15px;
                }
                
                .work-overlay h3 {
                    font-size: 1rem;
                    letter-spacing: 1px;
                }
                
                .work-overlay p {
                    font-size: 0.8rem;
                }
            }

            @media (min-width: 769px) and (max-width: 1024px) {
                .works-grid {
                    grid-template-columns: repeat(2, 1fr);
                    padding: 30px;
                }

                .work-card {
                    height: 280px;
                }
            }
        `;
        document.head.appendChild(style);
    }

    // Initialize modal
    addModalStyles();
    createModal();

    // Cached modal elements
    let modalElements = null;
    let currentVideoIndex = 0;
    let modalVideos = [];
    let modalInitialized = false;

    function getModalElements() {
        if (!modalElements) {
            modalElements = {
                modal: document.getElementById('videoModal'),
                video: document.getElementById('modalVideo'),
                title: document.getElementById('videoTitle'),
                description: document.getElementById('videoDescription'),
                current: document.getElementById('currentVideo'),
                total: document.getElementById('totalVideos'),
                prev: document.querySelector('.video-modal-prev'),
                next: document.querySelector('.video-modal-next'),
                overlay: document.querySelector('.video-modal-overlay'),
                close: document.querySelector('.video-modal-close')
            };
        }
        return modalElements;
    }

    // Work cards setup with event delegation
    function setupWorkCards() {
        if (modalInitialized) return;
        
        requestAnimationFrame(() => {
            const workCards = document.querySelectorAll('.work-card');
            modalVideos = Array.from(workCards).filter(card => card.querySelector('.work-video'));
            
            // Use event delegation for better performance
            document.addEventListener('mouseenter', function(e) {
                const card = e.target.closest('.work-card');
                if (!card) return;
                
                const video = card.querySelector('.work-video');
                if (video) {
                    video.muted = true;
                    video.currentTime = 0;
                    const playPromise = video.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(e => console.log('Preview play failed:', e.message));
                    }
                }
            }, true);

            document.addEventListener('mouseleave', function(e) {
                const card = e.target.closest('.work-card');
                if (!card) return;
                
                const video = card.querySelector('.work-video');
                if (video) {
                    video.pause();
                    video.currentTime = 0;
                }
            }, true);

            // Click handler with event delegation
            document.addEventListener('click', function(e) {
                const card = e.target.closest('.work-card');
                if (!card) return;
                
                const video = card.querySelector('.work-video');
                if (!video) return;
                
                e.preventDefault();
                e.stopPropagation();
                
                if (video.src || (video.querySelector('source') && video.querySelector('source').src)) {
                    const videoIndex = modalVideos.indexOf(card);
                    if (videoIndex !== -1) {
                        openVideoModal(videoIndex);
                    }
                }
            }, { passive: false });
            
            modalInitialized = true;
            console.log(`✅ Video modal setup complete! Found ${modalVideos.length} videos`);
        });
    }

    function openVideoModal(index) {
        currentVideoIndex = index;
        const card = modalVideos[currentVideoIndex];
        const video = card.querySelector('.work-video');
        const overlay = card.querySelector('.work-overlay');
        
        if (!video) return;
        
        const videoSrc = video.src || (video.querySelector('source') && video.querySelector('source').src);
        const elements = getModalElements();
        
        if (elements.modal && elements.video && videoSrc) {
            requestAnimationFrame(() => {
                elements.video.src = videoSrc;
                elements.video.muted = false;
                elements.video.currentTime = 0;
                
                // Update video info
                if (elements.title && overlay) {
                    const titleText = overlay.querySelector('h3')?.textContent || card.getAttribute('data-title') || 'Video';
                    elements.title.textContent = titleText;
                }
                
                if (elements.description && overlay) {
                    const descText = overlay.querySelector('p')?.textContent || card.getAttribute('data-description') || '';
                    elements.description.textContent = descText;
                }
                
                if (elements.current && elements.total) {
                    elements.current.textContent = currentVideoIndex + 1;
                    elements.total.textContent = modalVideos.length;
                }
                
                // Show/hide navigation buttons
                const showNav = modalVideos.length > 1;
                elements.prev.style.display = showNav ? 'flex' : 'none';
                elements.next.style.display = showNav ? 'flex' : 'none';
                
                elements.modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Play after modal opens
                setTimeout(() => {
                    const playPromise = elements.video.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(e => console.log('Modal play failed:', e.message));
                    }
                }, 100);
            });
        }
    }

    function nextVideo() {
        if (modalVideos.length > 1) {
            currentVideoIndex = (currentVideoIndex + 1) % modalVideos.length;
            openVideoModal(currentVideoIndex);
        }
    }

    function prevVideo() {
        if (modalVideos.length > 1) {
            currentVideoIndex = currentVideoIndex === 0 ? modalVideos.length - 1 : currentVideoIndex - 1;
            openVideoModal(currentVideoIndex);
        }
    }

    // Close modal function
    function closeModal() {
        const elements = getModalElements();
        
        if (elements.modal) {
            elements.modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            document.body.style.overflowY = 'auto';
            document.body.style.overflowX = 'hidden';
        }
        
        if (elements.video) {
            elements.video.pause();
            elements.video.currentTime = 0;
            elements.video.src = '';
        }
    }

    // Event listeners for modal with event delegation
    function setupModalEvents() {
        document.addEventListener('click', function(e) {
            if (e.target.matches('.video-modal-close')) {
                closeModal();
            } else if (e.target.matches('.video-modal-overlay')) {
                closeModal();
            } else if (e.target.matches('.video-modal-prev')) {
                prevVideo();
            } else if (e.target.matches('.video-modal-next')) {
                nextVideo();
            }
        }, { passive: true });

        // ESC key and Arrow keys
        document.addEventListener('keydown', function(e) {
            const elements = getModalElements();
            if (elements.modal && elements.modal.classList.contains('active')) {
                switch(e.key) {
                    case 'Escape':
                        closeModal();
                        break;
                    case 'ArrowLeft':
                        prevVideo();
                        break;
                    case 'ArrowRight':
                        nextVideo();
                        break;
                }
            }
        }, { passive: true });
    }

    // Initialize everything
    setupWorkCards();
    setupModalEvents();


// ===============================
    // SECTION VISIBILITY DETECTION FOR REELS FILTERS WITH CARD DEALING
    // ===============================
    
    // Create reels filter container if it doesn't exist
    function createReelsFiltersContainer() {
        let container = document.querySelector('.reels-filters') || 
                       document.querySelector('[class*="reels-filter"]') ||
                       document.querySelector('.filter-container');
        
        if (!container) {
            container = document.createElement('div');
            container.className = 'reels-filters';
            container.innerHTML = `
                <button class="reels-filter-btn" data-reel-filter="yayfest">YAYFEST</button>
                <button class="reels-filter-btn" data-reel-filter="azer">AZER AYDEMIR</button>
                <button class="reels-filter-btn" data-reel-filter="others">OTHERS</button>
            `;
            document.body.appendChild(container);
            console.log('✅ Reels filters container created automatically');
        }
        
        return container;
    }
    
    // Cache reels filter container
    const reelsFiltersContainer = createReelsFiltersContainer();
    
    let reelsFiltersAnimated = false;
    
    // Function to show reels filters with card dealing animation
    function showReelsFiltersWithAnimation() {
        if (!reelsFiltersContainer || reelsFiltersAnimated) return;
        
        requestAnimationFrame(() => {
            reelsFiltersContainer.style.display = 'flex';
            reelsFiltersContainer.classList.add('visible');
            
            // Add dealing animation class
            setTimeout(() => {
                reelsFiltersContainer.classList.add('dealing');
                reelsFiltersAnimated = true;
                
                // Remove animation class after completion
                setTimeout(() => {
                    reelsFiltersContainer.classList.remove('dealing');
                }, 800);
            }, 100);
        });
    }
    
    // Function to hide reels filters
    function hideReelsFilters() {
        if (!reelsFiltersContainer) return;
        
        requestAnimationFrame(() => {
            reelsFiltersContainer.classList.remove('visible');
            setTimeout(() => {
                reelsFiltersContainer.style.display = 'none';
            }, 300);
        });
        reelsFiltersAnimated = false;
    }
    
    // DEBUG: Test reels section detection
    function testReelsDetection() {
        console.log('🔍 Testing reels detection...');
        
        // Test reels section selectors
        const reelsSection = document.getElementById('reels') || 
                           document.querySelector('.reels-section') ||
                           document.querySelector('[class*="reels"]');
                           
        console.log('Reels section found:', reelsSection);
        console.log('Reels filters container:', reelsFiltersContainer);
        
        if (reelsSection) {
            const rect = reelsSection.getBoundingClientRect();
            console.log('Reels section position:', {
                top: rect.top,
                bottom: rect.bottom,
                height: rect.height
            });
        }
        

    }
    
    // Run test after page loads
    setTimeout(testReelsDetection, 2000);

    // Function to check if reels section is visible - DISABLED FOR NOW
    function checkReelsVisibility() {
        // TEMPORARILY DISABLED - Always show filters
        console.log('⚠️ Visibility check disabled - filters always shown');
        if (reelsFiltersContainer) {
            showReelsFiltersWithAnimation();
        }
        return;
        
        const reelsSection = document.getElementById('reels') || 
                           document.querySelector('.reels-section') ||
                           document.querySelector('[class*="reels"]');
        
        console.log('🔍 Checking reels visibility...', reelsSection);
        
        if (!reelsSection || !reelsFiltersContainer) {
            console.log('❌ Missing elements:', {
                reelsSection: !!reelsSection,
                reelsFiltersContainer: !!reelsFiltersContainer
            });
            return;
        }
        
        const rect = reelsSection.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        
        // UPDATED: More flexible visibility check
        // Show filters if section is anywhere near viewport (even if partially scrolled past)
        const isVisible = rect.bottom > -100 && rect.top < windowHeight + 100;
        
        console.log('Reels visibility check:', {
            isVisible,
            rectTop: rect.top,
            rectBottom: rect.bottom,
            windowHeight
        });
        
        // Show/hide reels filters based on visibility
        if (isVisible) {
            showReelsFiltersWithAnimation();
        } else {
            hideReelsFilters();
        }
    }

// ===============================
// 11. ENHANCED WORK FILTERS WITH SUBFILTERS - OPTIMIZED
// (Featured Reels Always Visible)
// ===============================

// Cache filter elements
let filterElements = null;
let currentMainFilter = 'reels'; // Default main filter
let currentSubFilter = 'yayfest'; // Default sub filter

function getFilterElements() {
    if (!filterElements) {
        filterElements = {
            buttons: document.querySelectorAll('.filter-btn'),
            cards: document.querySelectorAll('.work-card'),
            // Only select work-cards that are NOT in featured reels section
            filterableCards: document.querySelectorAll('.works-section .work-card, .work-cards .work-card, [class*="work"]:not([class*="featured"]) .work-card'),
            reelsSubfilters: document.querySelector('.reels-filters'),
            reelsFilterBtns: document.querySelectorAll('.reels-filter-btn'),
            featuredReelsCards: document.querySelectorAll('.featured-reels .work-card, [class*="featured"] .work-card')
        };
    }
    return filterElements;
}

// Enhanced media loading function
function loadMediaForFilter(mainFilter, subFilter = null) {
    const elements = getFilterElements();
    
    // Always load media for featured reels (they should always be visible)
    elements.featuredReelsCards.forEach(card => {
        const media = card.querySelector('img[data-src], video[data-src]');
        if (media && media.dataset.src && !media.src) {
            media.src = media.dataset.src;
            if (media.tagName.toLowerCase() === 'video') {
                media.load();
            }
        }
    });
    
    // Load media for filterable cards
    elements.filterableCards.forEach(card => {
        const category = card.getAttribute('data-category');
        const subcategory = card.getAttribute('data-subcategory');
        
        let shouldLoad = false;
        
        if (mainFilter === 'reels' && subFilter) {
            shouldLoad = category === 'reels' && subcategory === subFilter;
        } else {
            shouldLoad = category === mainFilter;
        }
        
        if (shouldLoad) {
            // Load media if not already loaded
            const media = card.querySelector('img[data-src], video[data-src]');
            if (media && media.dataset.src && !media.src) {
                media.src = media.dataset.src;
                if (media.tagName.toLowerCase() === 'video') {
                    media.load();
                }
                console.log(`📁 Loaded media for ${mainFilter}${subFilter ? '-' + subFilter : ''}`);
            }
        }
    });
}

// Show/hide cards based on filters (Featured Reels always visible)
function filterCards(mainFilter, subFilter = null) {
    const elements = getFilterElements();
    
    requestAnimationFrame(() => {
        // Keep featured reels always visible
        elements.featuredReelsCards.forEach(card => {
            card.style.display = 'block';
            card.style.opacity = '1';
            card.style.transform = 'scale(1)';
        });
        
        // Filter only the work section cards
        elements.filterableCards.forEach(card => {
            const category = card.getAttribute('data-category');
            const subcategory = card.getAttribute('data-subcategory');
            
            let shouldShow = false;
            
            if (mainFilter === 'reels' && subFilter) {
                shouldShow = category === 'reels' && subcategory === subFilter;
            } else if (mainFilter === 'reels' && !subFilter) {
                shouldShow = category === 'reels';
            } else {
                shouldShow = category === mainFilter;
            }
            
            if (shouldShow) {
                card.style.display = 'block';
                requestAnimationFrame(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1)';
                });
            } else {
                card.style.opacity = '0';
                card.style.transform = 'scale(0.8)';
                setTimeout(() => {
                    card.style.display = 'none';
                }, 300);
            }
        });
    });
}

// Enhanced function to ensure featured reels are always visible
function ensureFeaturedReelsVisible() {
    const featuredReelsSection = document.querySelector('.featured-reels, [class*="featured"]');
    const featuredCards = document.querySelectorAll('.featured-reels .work-card, [class*="featured"] .work-card');
    
    if (featuredReelsSection) {
        featuredReelsSection.style.display = 'block';
        featuredReelsSection.style.opacity = '1';
    }
    
    featuredCards.forEach(card => {
        card.style.display = 'block';
        card.style.opacity = '1';
        card.style.transform = 'scale(1)';
        
        // Load media immediately for featured cards
        const media = card.querySelector('img[data-src], video[data-src]');
        if (media && media.dataset.src && !media.src) {
            media.src = media.dataset.src;
            if (media.tagName.toLowerCase() === 'video') {
                media.load();
            }
        }
    });
}

// Main filter click handler
document.addEventListener('click', function(e) {
    const btn = e.target.closest('.filter-btn');
    if (!btn) return;
    
    const elements = getFilterElements();
    const filter = btn.getAttribute('data-filter');
    
    // Update active states
    elements.buttons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    
    currentMainFilter = filter;
    
    // Show/hide reels subfilters
    if (elements.reelsSubfilters || document.querySelector('.reels-filters')) {
        const reelsFilters = elements.reelsSubfilters || document.querySelector('.reels-filters');
        
        if (filter === 'reels') {
            reelsFilters.style.display = 'flex';
            reelsFilters.classList.add('visible');
            reelsFilters.classList.add('dealing');
            
            // If switching to reels, apply current sub filter
            filterCards('reels', currentSubFilter);
            loadMediaForFilter('reels', currentSubFilter);
        } else {
            reelsFilters.classList.remove('visible');
            reelsFilters.classList.remove('dealing');
            setTimeout(() => {
                reelsFilters.style.display = 'none';
            }, 300);
            
            // Filter for other categories
            filterCards(filter);
            loadMediaForFilter(filter);
        }
    } else {
        // No subfilters container, just filter normally
        filterCards(filter);
        loadMediaForFilter(filter);
    }
    
    // Always ensure featured reels remain visible
    setTimeout(ensureFeaturedReelsVisible, 50);
    
}, { passive: true });

// Reels sub filter click handler
document.addEventListener('click', function(e) {
    const btn = e.target.closest('.reels-filter-btn');
    if (!btn) return;
    
    const elements = getFilterElements();
    const subFilter = btn.getAttribute('data-reel-filter');
    
    // Update active states for sub filters
    elements.reelsFilterBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    
    currentSubFilter = subFilter;
    
    // Filter cards and load media
    filterCards('reels', subFilter);
    loadMediaForFilter('reels', subFilter);
    
    // Always ensure featured reels remain visible
    setTimeout(ensureFeaturedReelsVisible, 50);
    
}, { passive: true });

// Initialize default state
function initializeWorkFilters() {
    // Create reels filters container to match your CSS class name
    let reelsFilters = document.querySelector('.reels-filters');
    
    if (!reelsFilters) {
        reelsFilters = document.createElement('div');
        reelsFilters.className = 'reels-filters visible dealing';
        reelsFilters.innerHTML = `
            <button class="reels-filter-btn active" data-reel-filter="yayfest">YayFest</button>
            <button class="reels-filter-btn" data-reel-filter="azer">Azər Aydəmir</button>
            <button class="reels-filter-btn" data-reel-filter="idea">İDEA</button>
            <button class="reels-filter-btn" data-reel-filter="others">Others</button>
        `;
        
        // Insert after main filter buttons or before works grid
        const worksFilters = document.querySelector('.works-filters') || 
                            document.querySelector('.filter-buttons') ||
                            document.querySelector('[class*="filter"]');
        
        if (worksFilters) {
            worksFilters.insertAdjacentElement('afterend', reelsFilters);
        } else {
            const worksGrid = document.querySelector('.works-grid') || 
                            document.querySelector('.work-cards') ||
                            document.querySelector('[class*="work"]');
            if (worksGrid) {
                worksGrid.insertAdjacentElement('beforebegin', reelsFilters);
            } else {
                // Add to body as fallback
                document.body.appendChild(reelsFilters);
            }
        }
        
        console.log('✅ Reels filters container created with your CSS classes');
    }
    
    requestAnimationFrame(() => {
        // Force show filters with your CSS classes
        reelsFilters.style.display = 'flex';
        reelsFilters.classList.add('visible');
        reelsFilters.classList.add('dealing');
        
        // Set default main filter active
        const defaultMainBtn = document.querySelector('.filter-btn[data-filter="reels"]');
        if (defaultMainBtn) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            defaultMainBtn.classList.add('active');
        }
        
        // Set default sub filter active
        const defaultSubBtn = reelsFilters.querySelector('.reels-filter-btn[data-reel-filter="yayfest"]');
        if (defaultSubBtn) {
            reelsFilters.querySelectorAll('.reels-filter-btn').forEach(btn => btn.classList.remove('active'));
            defaultSubBtn.classList.add('active');
        }
        
        // Update filter elements cache
        filterElements = null;
        
        // Filter cards and load only yayfest media initially
        filterCards('reels', 'yayfest');
        loadMediaForFilter('reels', 'yayfest');
        
        // Ensure featured reels are always visible
        ensureFeaturedReelsVisible();
        
        console.log('✅ Work filters initialized with featured reels always visible');
        console.log('🔍 Filters container:', reelsFilters);
        console.log('🔍 Filter buttons:', reelsFilters.querySelectorAll('.reels-filter-btn').length);
    });
}

// Initialize multiple times to ensure it works
setTimeout(initializeWorkFilters, 100);
setTimeout(initializeWorkFilters, 500);
setTimeout(initializeWorkFilters, 1000);

// Additional safety check to keep featured reels visible
setInterval(() => {
    ensureFeaturedReelsVisible();
}, 2000);

// ===============================
// 12. PARALLAX - OPTIMIZED WITH RAF
// ===============================
let parallaxFrame = null;
const heroVideo = document.querySelector('.hero-video');
    
    function handleParallax() {
        if (parallaxFrame) return;
        
        parallaxFrame = requestAnimationFrame(() => {
            const scrolled = window.pageYOffset;
            
            if (heroVideo && scrolled >= 0) {
                const speed = 0.3;
                const yPos = -(scrolled * speed);
                heroVideo.style.transform = `translate3d(0, ${yPos}px, 0)`;
            }
            
            parallaxFrame = null;
        });
    }
    
    // Add optimized parallax to scroll handler
    window.addEventListener('scroll', handleParallax, { passive: true });

    // ===============================
    // 13. CARD STAGGER ANIMATION - OPTIMIZED
    // ===============================
    const cardObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                // Use RAF for better performance
                const delay = index * 100;
                setTimeout(() => {
                    requestAnimationFrame(() => {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    });
                }, delay);
                
                // Stop observing this element
                cardObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    requestAnimationFrame(() => {
        document.querySelectorAll('.reel-card, .work-card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'all 0.6s ease';
            card.style.willChange = 'transform, opacity';
            cardObserver.observe(card);
        });
    });

    // ===============================
    // 14. KEYBOARD NAVIGATION - OPTIMIZED
    // ===============================
    let keyboardFrame = null;
    const sections = ['#home', '#reels', '#about', '#works', '#contact'];
    
    document.addEventListener('keydown', function(e) {
        if (keyboardFrame) return;
        
        // Check if modal is open first
        const isModalOpen = document.querySelector('.video-modal.active') || 
                           document.querySelector('.image-lightbox.active');
        
        if (isModalOpen || (e.key !== 'ArrowDown' && e.key !== 'ArrowUp')) return;
        
        keyboardFrame = requestAnimationFrame(() => {
            let currentSection = 0;
            
            // Find current section
            sections.forEach((section, index) => {
                const element = document.querySelector(section);
                if (element) {
                    const rect = element.getBoundingClientRect();
                    if (rect.top <= 100 && rect.bottom >= 100) {
                        currentSection = index;
                    }
                }
            });
            
            // Navigate with arrow keys
            if (e.key === 'ArrowDown' && currentSection < sections.length - 1) {
                e.preventDefault();
                const targetSection = document.querySelector(sections[currentSection + 1]);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            } else if (e.key === 'ArrowUp' && currentSection > 0) {
                e.preventDefault();
                const targetSection = document.querySelector(sections[currentSection - 1]);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
            
            keyboardFrame = null;
        });
    }, { passive: false });

    // ===============================
    // 15. OPTIMIZED DUST DISINTEGRATION EFFECT
    // ===============================
    let animationStarted = false;
    let particles = [];
    let letters = [];
    let dustAnimationFrame = null;
    
    function prepareTextForDisintegration() {
        const welcomeText = document.getElementById('hero-title') || 
                           document.querySelector('.hero-title') ||
                           document.querySelector('h1');
        
        if (!welcomeText) return;
        
        const text = welcomeText.textContent;
        welcomeText.innerHTML = '';
        letters = [];
        
        // Use document fragment for better performance
        const fragment = document.createDocumentFragment();
        
        [...text].forEach((letter, index) => {
            const span = document.createElement('span');
            span.className = 'letter-particle';
            span.textContent = letter === ' ' ? '\u00A0' : letter;
            span.style.cssText = 'position:relative;display:inline-block;transition:all 0.3s ease;will-change:transform,opacity';
            
            fragment.appendChild(span);
            letters.push(span);
        });
        
        welcomeText.appendChild(fragment);
    }
    
    function startRealTimeDisintegration() {
        if (animationStarted || letters.length === 0) return;
        animationStarted = true;
        
        // Batch process letters for better performance
        const batchSize = 5;
        let currentBatch = 0;
        
        function processBatch() {
            const start = currentBatch * batchSize;
            const end = Math.min(start + batchSize, letters.length);
            
            for (let i = start; i < end; i++) {
                const delay = i * 100;
                setTimeout(() => {
                    disintegrateLetter(letters[i]);
                }, delay);
            }
            
            currentBatch++;
            if (end < letters.length) {
                setTimeout(processBatch, 50);
            }
        }
        
        processBatch();
        
        // Start wind animation
        setTimeout(() => {
            animateWindEffect();
        }, 200);
    }
    
    function disintegrateLetter(letterSpan) {
        const rect = letterSpan.getBoundingClientRect();
        
        // Simplified particle creation
        requestAnimationFrame(() => {
            letterSpan.style.opacity = '0';
            letterSpan.style.transform = 'scale(0.8)';
            
            // Create fewer particles for better performance
            const particleCount = Math.min(5, Math.ceil(rect.width / 10));
            
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    createDustParticle(
                        rect.left + Math.random() * rect.width,
                        rect.top + Math.random() * rect.height
                    );
                }, i * 10);
            }
            
            // Remove letter element
            setTimeout(() => {
                letterSpan.style.display = 'none';
            }, 600);
        });
    }
    
    function createDustParticle(x, y) {
        const particle = document.createElement('div');
        particle.className = 'dust-particle';
        
        const size = Math.random() * 3 + 1;
        particle.style.cssText = `
            position:fixed;
            width:${size}px;
            height:${size}px;
            left:${x}px;
            top:${y}px;
            background:#FF9B00;
            border-radius:50%;
            pointer-events:none;
            z-index:5;
            opacity:0.8;
            box-shadow:0 0 ${size}px #FF9B00;
            will-change:transform,opacity
        `;
        
        // Wind properties
        particle.windSpeed = Math.random() * 3 + 1;
        particle.verticalDrift = (Math.random() - 0.5) * 0.5;
        particle.turbulence = Math.random() * 0.3;
        particle.life = 1.0;
        particle.rotation = Math.random() * 360;
        particle.rotationSpeed = (Math.random() - 0.5) * 5;
        
        document.body.appendChild(particle);
        particles.push(particle);
        
        // Limit max particles for performance
        if (particles.length > 50) {
            const oldParticle = particles.shift();
            if (oldParticle.parentNode) {
                oldParticle.remove();
            }
        }
    }
    
    function animateWindEffect() {
        let frameCount = 0;
        
        const windAnimation = () => {
            frameCount++;
            
            // Process particles in batches
            const batchSize = 10;
            const totalBatches = Math.ceil(particles.length / batchSize);
            
            for (let batch = 0; batch < totalBatches; batch++) {
                const start = batch * batchSize;
                const end = Math.min(start + batchSize, particles.length);
                
                for (let i = start; i < end; i++) {
                    const particle = particles[i];
                    if (!particle || !particle.parentNode) continue;
                    
                    const currentLeft = parseFloat(particle.style.left);
                    const currentTop = parseFloat(particle.style.top);
                    
                    // Wind movement
                    const newLeft = currentLeft + particle.windSpeed;
                    
                    // Vertical drift with turbulence
                    const turbulenceY = Math.sin(frameCount * 0.08 + i * 0.05) * particle.turbulence;
                    const newTop = currentTop + particle.verticalDrift + turbulenceY;
                    
                    // Rotation
                    particle.rotation += particle.rotationSpeed;
                    
                    particle.style.transform = `translate3d(${newLeft}px, ${newTop}px, 0) rotate(${particle.rotation}deg)`;
                    
                    // Fade out
                    particle.life -= 0.005; // Faster fade for performance
                    particle.style.opacity = Math.max(0, particle.life);
                    
                    // Remove when off screen or faded
                    if (newLeft > window.innerWidth + 50 || particle.life <= 0 || newTop > window.innerHeight + 50) {
                        particle.remove();
                        particles.splice(i, 1);
                        i--; // Adjust index after removal
                    }
                }
            }
            
            if (particles.length > 0 || frameCount < 500) { // Reduced max frames
                dustAnimationFrame = requestAnimationFrame(windAnimation);
            }
        };
        
        dustAnimationFrame = requestAnimationFrame(windAnimation);
    }
    
    function startDisintegration() {
        prepareTextForDisintegration();
        setTimeout(() => {
            startRealTimeDisintegration();
        }, 100);
    }
    
    // Start after 10 seconds
    setTimeout(startDisintegration, 10000);
    
    // Click to start early (one-time listener)
    let disintegrationStarted = false;
    document.addEventListener('click', () => {
        if (!animationStarted && !disintegrationStarted) {
            disintegrationStarted = true;
            startDisintegration();
        }
    }, { once: true, passive: true });

    // ===============================
    // 16. PERFORMANCE OPTIMIZATION - ENHANCED
    // ===============================
    
    // Optimized video initialization
    function initializeVideos() {
        requestAnimationFrame(() => {
            document.querySelectorAll('video').forEach((video, index) => {
                video.preload = 'metadata';
                video.playsInline = true;
                video.setAttribute('playsinline', '');
                
                // Prevent context menu
                video.addEventListener('contextmenu', e => e.preventDefault(), { passive: false });
                
                // Optimized error handling
                video.addEventListener('error', function(e) {
                    console.warn(`Video ${index + 1} load error:`, e);
                }, { passive: true, once: true });
                
                // Load event
                video.addEventListener('loadeddata', function() {
                    console.log(`Video ${index + 1} loaded successfully`);
                }, { passive: true, once: true });
            });
        });
    }

    // Optimized page visibility handler
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            // Pause all videos when page hidden
            document.querySelectorAll('video').forEach(video => {
                if (!video.paused) {
                    video.pause();
                }
            });
            
            // Cancel all animation frames
            if (animationFrame) cancelAnimationFrame(animationFrame);
            if (parallaxFrame) cancelAnimationFrame(parallaxFrame);
            if (dustAnimationFrame) cancelAnimationFrame(dustAnimationFrame);
        }
    }, { passive: true });

    // Optimized window resize handler
    const optimizedResizeHandler = () => {
        if (resizeTimeout) clearTimeout(resizeTimeout);
        
        resizeTimeout = setTimeout(() => {
            requestAnimationFrame(() => {
                const isMobile = window.innerWidth <= 768;
                const hamburger = document.querySelector('.hamburger');
                const mobileMenu = document.querySelector('.mobile-menu');
                
                if (!isMobile && hamburger && mobileMenu) {
                    hamburger.classList.remove('active');
                    mobileMenu.classList.remove('active');
                    document.body.style.overflow = '';
                }
                
                // Update custom cursor visibility
                const cursor = document.querySelector('.custom-cursor');
                if (cursor) {
                    cursor.style.display = isMobile ? 'none' : 'block';
                }
                
                // Clear cached elements to refresh
                lightboxElements = null;
                modalElements = null;
                filterElements = null;
                
                // Re-setup lightbox after resize
                setTimeout(() => {
                    setupLightbox();
                }, 100);
                
                // Recheck reels visibility after resize
                checkReelsVisibility();
            });
        }, 250);
    };

    window.addEventListener('resize', optimizedResizeHandler, { passive: true });

    // Initialize videos
    initializeVideos();

    // ===============================
    // SCROLL FIX - OPTIMIZED
    // ===============================
    
    // Add custom scrollbar styles once
    function addScrollbarStyles() {
        if (document.getElementById('custom-scrollbar-styles')) return;
        
        const scrollbarStyle = document.createElement('style');
        scrollbarStyle.id = 'custom-scrollbar-styles';
        scrollbarStyle.textContent = `
            ::-webkit-scrollbar {
                width: 0px;
                background: transparent;
            }
            
            ::-webkit-scrollbar-thumb {
                background: transparent;
            }
            
            html {
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            body {
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            html, body {
                overflow-x: hidden !important;
                overflow-y: auto !important;
            }
            
            body::-webkit-scrollbar {
                display: none;
            }
        `;
        document.head.appendChild(scrollbarStyle);
        console.log('✅ Custom scrollbar styles added - scrollbar hidden!');
    }
    
    // Optimized scroll enabling
    function forceEnableScroll() {
        const scrollStyles = 'overflow:auto!important;overflow-y:auto!important;overflow-x:hidden!important;height:auto!important';
        document.body.style.cssText += scrollStyles;
        document.documentElement.style.cssText += scrollStyles;
        
        document.body.classList.remove('loading');
        document.documentElement.classList.remove('loading');
        
        console.log('✅ Scroll forcefully enabled with hidden scrollbar!');
    }
    
    // Apply optimizations immediately
    addScrollbarStyles();
    forceEnableScroll();
    
    // Cleanup and re-apply after page load
    window.addEventListener('load', () => {
        requestAnimationFrame(() => {
            addScrollbarStyles();
            forceEnableScroll();
        });
    }, { passive: true, once: true });

    // ===============================
    // OPTIMIZED IMAGE OBSERVER
    // ===============================
    
    // Debounced image observer
    let imageObserverTimeout = null;
    const optimizedImageObserver = new MutationObserver(function(mutations) {
        if (imageObserverTimeout) clearTimeout(imageObserverTimeout);
        
        imageObserverTimeout = setTimeout(() => {
            let newImagesAdded = false;
            
            mutations.forEach(function(mutation) {
                mutation.addedNodes.forEach(function(node) {
                    if (node.tagName === 'IMG' || (node.querySelectorAll && node.querySelectorAll('img').length > 0)) {
                        newImagesAdded = true;
                    }
                });
            });
            
            if (newImagesAdded) {
                requestAnimationFrame(() => {
                    lightboxInitialized = false; // Reset flag
                    setupLightbox();
                    console.log('🔄 Lightbox re-initialized for new images');
                });
            }
        }, 100);
    });
    
    // Start observing with limited scope
    optimizedImageObserver.observe(document.body, {
        childList: true,
        subtree: true,
        attributes: false,
        characterData: false
    });

    // ===============================
    // MEMORY CLEANUP
    // ===============================
    
    // Cleanup function for better memory management
    function cleanup() {
        // Cancel all pending animation frames
        if (animationFrame) cancelAnimationFrame(animationFrame);
        if (parallaxFrame) cancelAnimationFrame(parallaxFrame);
        if (dustAnimationFrame) cancelAnimationFrame(dustAnimationFrame);
        if (keyboardFrame) cancelAnimationFrame(keyboardFrame);
        
        // Clear timeouts
        if (resizeTimeout) clearTimeout(resizeTimeout);
        if (imageObserverTimeout) clearTimeout(imageObserverTimeout);
        
        // Disconnect observers
        if (observer) observer.disconnect();
        if (cardObserver) cardObserver.disconnect();
        if (optimizedImageObserver) optimizedImageObserver.disconnect();
        
        // Clear particles
        particles.forEach(particle => {
            if (particle.parentNode) particle.remove();
        });
        particles = [];
        
        console.log('🧹 Memory cleanup completed');
    }
    
    // Cleanup on page unload
    window.addEventListener('beforeunload', cleanup, { passive: true });
    
    console.log('All JavaScript initialized successfully with performance optimizations! 🚀');
     // First, let's modify the existing checkReelsVisibility function to work with navigation

    // REPLACE EXISTING FORCE SHOW CODE with navigation-controlled visibility
    
   

    // Add enhanced CSS styles for reels filters
    function addEnhancedReelsFilterStyles() {
        if (document.getElementById('enhanced-reels-filter-styles')) return;
        
        const style = document.createElement('style');
        style.id = 'enhanced-reels-filter-styles';
        style.textContent = `
            .reels-filters {
                display: none;
                justify-content: center;
                align-items: center;
                gap: 20px;
                padding: 20px 0;
                background: rgba(0, 0, 0, 0.9);
                backdrop-filter: blur(15px);
                position: sticky;
                top: 80px;
                z-index: 100;
                border-bottom: 2px solid rgba(255, 165, 0, 0.3);
                margin: 0;
                opacity: 0;
                transform: translateY(-30px);
                transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            }
            
            .reels-filters.visible {
                opacity: 1;
                transform: translateY(0);
            }
            
            .reels-filter-btn {
                background: transparent;
                border: 2px solid rgba(255, 165, 0, 0.6);
                color: #ffffff;
                padding: 12px 24px;
                border-radius: 30px;
                cursor: pointer;
                font-size: 13px;
                font-weight: 700;
                letter-spacing: 1.5px;
                text-transform: uppercase;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
                backdrop-filter: blur(5px);
                font-family: inherit;
                opacity: 0;
                transform: translateY(-20px);
            }
            
            .reels-filter-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 165, 0, 0.2), transparent);
                transition: left 0.6s ease;
            }
            
            .reels-filter-btn:hover::before {
                left: 100%;
            }
            
            .reels-filter-btn:hover {
                border-color: #FFA500;
                background: rgba(255, 165, 0, 0.15);
                transform: translateY(-3px) scale(1.02);
                box-shadow: 0 8px 25px rgba(255, 165, 0, 0.4);
            }
            
            .reels-filter-btn.active {
                background: linear-gradient(45deg, #FFA500, #ff8c00);
                color: #000000;
                border-color: #FFA500;
                box-shadow: 0 8px 30px rgba(255, 165, 0, 0.5);
                font-weight: 800;
                transform: translateY(0) scale(1.05);
            }
            
            .reels-filter-btn.active::before {
                display: none;
            }
            
            /* Stagger animation for buttons */
            .reels-filters.dealing .reels-filter-btn:nth-child(1) {
                animation: filterSlideIn 0.4s ease forwards;
                animation-delay: 0ms;
            }
            
            .reels-filters.dealing .reels-filter-btn:nth-child(2) {
                animation: filterSlideIn 0.4s ease forwards;
                animation-delay: 100ms;
            }
            
            .reels-filters.dealing .reels-filter-btn:nth-child(3) {
                animation: filterSlideIn 0.4s ease forwards;
                animation-delay: 200ms;
            }
            
            .reels-filters.dealing .reels-filter-btn:nth-child(4) {
                animation: filterSlideIn 0.4s ease forwards;
                animation-delay: 300ms;
            }
            
            /* Mobile responsive */
            @media (max-width: 768px) {
                .reels-filters {
                    gap: 12px;
                    padding: 15px 10px;
                    top: 60px;
                    flex-wrap: wrap;
                }
                
                .reels-filter-btn {
                    padding: 10px 18px;
                    font-size: 11px;
                    letter-spacing: 1px;
                }
            }
            
            @media (max-width: 480px) {
                .reels-filters {
                    gap: 8px;
                    padding: 12px 5px;
                }
                
                .reels-filter-btn {
                    padding: 8px 15px;
                    font-size: 10px;
                    letter-spacing: 0.5px;
                    border-radius: 20px;
                }
            }
            
            /* Animation keyframes */
            @keyframes filterSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(-20px) scale(0.8);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            /* Card filter transitions */
            .reel-card {
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .reel-card[style*="opacity: 0"] {
                pointer-events: none;
            }
        `;
        
        document.head.appendChild(style);
        console.log('🎨 Enhanced reels filter styles added');
    }
    
    // Add styles
    addEnhancedReelsFilterStyles();
    
    // Manual testing functions (only in development)
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        window.testShowReelsFilters = function() {
            if (reelsFiltersContainer) {
                reelsFiltersContainer.style.display = 'flex';
                reelsFiltersContainer.classList.add('visible');
                console.log('🧪 Test: Reels filters shown manually');
            }
        };
        
        window.testHideReelsFilters = function() {
            if (reelsFiltersContainer) {
                reelsFiltersContainer.classList.remove('visible');
                setTimeout(() => {
                    reelsFiltersContainer.style.display = 'none';
                }, 300);
                console.log('🧪 Test: Reels filters hidden manually');
            }
        };
        
        console.log('🧪 Test functions available: testShowReelsFilters(), testHideReelsFilters()');
    }
});

// ===============================
// OPTIMIZED UTILITY FUNCTIONS
// ===============================

// High-performance debounce
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
    };
}

// High-performance throttle with RAF
function throttle(func, limit = 16) {
    let inThrottle = false;
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}

// Performance monitoring (optional)
if (typeof performance !== 'undefined' && performance.mark) {
    performance.mark('js-optimization-complete');
    console.log('⚡ Performance monitoring active');
/* === GLOBAL LAZY LOAD FOR ALL MEDIA === */
(function () {
  // Helper: element hansı section/card-a aiddir?
  function getCategory(el) {
    const card = el.closest('[data-category], [data-reel-category], [data-type]');
    return (
      (card && (card.dataset.category || card.dataset.reelCategory || card.dataset.type)) ||
      ''
    ).toLowerCase();
  }

  // Bütün img/video/iframe-lərin src-lərini data-src-ə daşı
  function prepareLazyMedia() {
    document.querySelectorAll('img, video, iframe').forEach((media) => {
      if (media.dataset.src) return; // artıq hazırlanıbsa keç

      // src varsa onu data-src-ə daşı
      const current =
        media.currentSrc ||
        media.getAttribute('src') ||
        (media.querySelector('source') && media.querySelector('source').src);
      if (current) {
        media.dataset.src = current;
        media.removeAttribute('src');

        // video/iframe üçün source taglarını da təmizlə
        media.querySelectorAll('source').forEach((s) => s.remove());
        if (media.tagName.toLowerCase() === 'video') {
          media.load();
        }
      }
    });
  }

  // Media yükləmə funksiyası
  function loadMediaForCategory(category) {
    document.querySelectorAll('img[data-src], video[data-src], iframe[data-src]').forEach((media) => {
      const cat = getCategory(media);
      if (cat.includes(category) || category === 'all') {
        if (!media.src) {
          media.src = media.dataset.src;
          if (media.tagName.toLowerCase() === 'video') {
            media.load();
          }
        }
      }
    });
  }

  // İlk girişdə hazırla və yalnız reels media-nı yüklə
  prepareLazyMedia();
  loadMediaForCategory('reels');

  // Section dəyişəndə uyğun media-nı yüklə
  document.addEventListener('click', (e) => {
    const navBtn = e.target.closest('a, button');
    if (!navBtn) return;

    let section =
      navBtn.getAttribute('data-section') ||
      navBtn.getAttribute('data-filter') ||
      navBtn.getAttribute('href') ||
      navBtn.textContent.toLowerCase().trim();

    if (section && section.includes('#')) {
      section = section.replace('#', '');
    }

    if (section) {
      loadMediaForCategory(section.toLowerCase());
    }
  });

  // Hash dəyişəndə də işləsin
  window.addEventListener('hashchange', () => {
    const hash = window.location.hash.replace('#', '').toLowerCase();
    if (hash) {
      loadMediaForCategory(hash);
    }
  });
})();
window.addEventListener('DOMContentLoaded', () => {
    const reelsFilterBtn = document.querySelector('.filter-btn[data-filter="reels"]');
    if (reelsFilterBtn) {
        reelsFilterBtn.click(); // sanki istifadəçi klik edib
    }
});
window.addEventListener('load', () => {
    const reelsSection = document.querySelector('.reels-container');
    const reelsFilters = document.querySelector('.reels-filters');

    if (reelsSection) {
        reelsSection.style.display = 'block';
        reelsSection.classList.add('visible');
    }
    if (reelsFilters) {
        reelsFilters.style.display = 'flex';
        reelsFilters.classList.add('visible');
    }

    console.log('✅ Forced Reels section & filters to always be visible');
});
// ===============================
// VİDEO KART CLICK PROBLEMİNİN DÜZƏLİŞİ
// ===============================

document.addEventListener('DOMContentLoaded', function() {
    console.log('🔧 Video kart click düzəlişi başlayır...');
    
    // ===============================
    // PROBLEMİN SƏBƏBİ: 
    // - Modal video array düzgün qurulmayıb
    // - Index hesablaması səhv işləyir
    // - Click handler-lər qarışıq işləyir
    // ===============================
    
    // Modal sistemini yenidən quraq
    let modalVideoCards = [];
    let currentModalIndex = 0;
    
    function rebuildModalSystem() {
        console.log('🏗️ Modal sistem yenidən qurulur...');
        
        // Bütün video kartları topla (görünən və gizli hər ikisi)
        modalVideoCards = Array.from(document.querySelectorAll('.work-card')).filter(card => {
            return card.querySelector('video, .work-video');
        });
        
        console.log(`📊 Tapılan video kartları: ${modalVideoCards.length}`);
        
        // Hər karta düzgün click handler əlavə et
        modalVideoCards.forEach((card, actualIndex) => {
            // Köhnə listener-ləri sil
            card.replaceWith(card.cloneNode(true));
            const newCard = modalVideoCards[actualIndex] = document.querySelectorAll('.work-card')[actualIndex];
            
            // Yeni düzgün click handler
            newCard.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log(`🎬 Kart ${actualIndex} tıklandı (0-based index)`);
                
                // Index-i yadda saxla
                currentModalIndex = actualIndex;
                
                // Modal aç
                openVideoModalFixed(actualIndex);
            });
            
            console.log(`✅ Kart ${actualIndex} click handler-i yeniləndi`);
        });
    }
    
    // ===============================
    // DÜZELDİLMİŞ MODAL AÇMA FUNKSİYASI
    // ===============================
    
    function openVideoModalFixed(cardIndex) {
        console.log(`🎥 Modal açılır: kart index ${cardIndex}`);
        
        if (cardIndex < 0 || cardIndex >= modalVideoCards.length) {
            console.error(`❌ Səhv card index: ${cardIndex} (Maksimum: ${modalVideoCards.length - 1})`);
            return;
        }
        
        const card = modalVideoCards[cardIndex];
        if (!card) {
            console.error(`❌ Kart tapılmadı: index ${cardIndex}`);
            return;
        }
        
        const video = card.querySelector('video, .work-video');
        if (!video) {
            console.error(`❌ Video tapılmadı: kart ${cardIndex}`);
            return;
        }
        
        // Modal elementlərini tap
        const modal = document.getElementById('videoModal') || 
                     document.querySelector('.video-modal');
        const modalVideo = document.getElementById('modalVideo') || 
                          modal?.querySelector('video');
        
        if (!modal || !modalVideo) {
            console.error('❌ Modal elementləri tapılmadı');
            return;
        }
        
        // Video source-unu düzgün əldə et
        let videoSrc = getVideoSource(video);
        
        if (!videoSrc) {
            console.error(`❌ Video source tapılmadı: kart ${cardIndex}`);
            console.log('Debug video:', {
                src: video.src,
                dataSrc: video.dataset.src,
                sources: video.querySelectorAll('source').length
            });
            return;
        }
        
        console.log(`✅ Video source: ${videoSrc}`);
        
        // Modal video-nu hazırla
        modalVideo.src = videoSrc;
        modalVideo.muted = false;
        modalVideo.currentTime = 0;
        modalVideo.controls = true;
        modalVideo.load();
        
        // Modal məlumatları
        const overlay = card.querySelector('.work-overlay');
        const title = overlay?.querySelector('h3')?.textContent || 
                     card.getAttribute('data-title') || 
                     `Video ${cardIndex + 1}`;
        const description = overlay?.querySelector('p')?.textContent || 
                           card.getAttribute('data-description') || '';
        
        // Modal mətnləri yenilə
        const modalTitle = document.getElementById('videoTitle') || 
                          modal.querySelector('h3, .video-title');
        const modalDesc = document.getElementById('videoDescription') || 
                         modal.querySelector('p, .video-description');
        
        if (modalTitle) modalTitle.textContent = title;
        if (modalDesc) modalDesc.textContent = description;
        
        // Counter yenilə
        updateModalCounterFixed(cardIndex);
        
        // Navigation göstər/gizlə
        const prevBtn = modal.querySelector('.video-modal-prev, .lightbox-prev');
        const nextBtn = modal.querySelector('.video-modal-next, .lightbox-next');
        
        const showNav = modalVideoCards.length > 1;
        if (prevBtn) prevBtn.style.display = showNav ? 'flex' : 'none';
        if (nextBtn) nextBtn.style.display = showNav ? 'flex' : 'none';
        
        // Modal göstər
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        console.log(`✅ Modal açıldı: ${title}`);
        
        // Video oynadan
        setTimeout(() => {
            const playPromise = modalVideo.play();
            if (playPromise) {
                playPromise.catch(e => {
                    console.log('Video oynatma üçün user interaction lazım:', e.message);
                });
            }
        }, 300);
    }
    
    // ===============================
    // VIDEO SOURCE TAPMA FUNKSİYASI
    // ===============================
    
    function getVideoSource(video) {
        // Müxtəlif source variantlarını yoxla
        if (video.src) {
            return video.src;
        }
        
        if (video.dataset.src) {
            return video.dataset.src;
        }
        
        // Source elementləri yoxla
        const sources = video.querySelectorAll('source');
        for (let source of sources) {
            if (source.src) {
                return source.src;
            }
            if (source.dataset.src) {
                return source.dataset.src;
            }
        }
        
        // CurrentSrc yoxla
        if (video.currentSrc) {
            return video.currentSrc;
        }
        
        return null;
    }
    
    // ===============================
    // DÜZGUN COUNTER SİSTEMİ
    // ===============================
    
    function updateModalCounterFixed(currentIndex) {
        const modal = document.getElementById('videoModal') || 
                     document.querySelector('.video-modal');
        
        if (!modal) return;
        
        const currentCounter = modal.querySelector('#currentVideo, [class*="current"]');
        const totalCounter = modal.querySelector('#totalVideos, [class*="total"]');
        
        if (currentCounter && totalCounter) {
            // Sadəcə array index + 1
            currentCounter.textContent = currentIndex + 1;
            totalCounter.textContent = modalVideoCards.length;
            
            console.log(`📊 Counter yeniləndi: ${currentIndex + 1}/${modalVideoCards.length}`);
        }
    }
    
    // ===============================
    // MODAL NAVİQASİYA DÜZƏLİŞİ
    // ===============================
    
    function setupModalNavigationFixed() {
        const modal = document.getElementById('videoModal') || 
                     document.querySelector('.video-modal');
        
        if (!modal) return;
        
        // Navigation düymələri
        const prevBtn = modal.querySelector('.video-modal-prev, .lightbox-prev');
        const nextBtn = modal.querySelector('.video-modal-next, .lightbox-next');
        
        // Previous button
        if (prevBtn) {
            // Köhnə listener-ləri sil
            prevBtn.replaceWith(prevBtn.cloneNode(true));
            const newPrevBtn = modal.querySelector('.video-modal-prev, .lightbox-prev');
            
            newPrevBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const newIndex = currentModalIndex === 0 
                    ? modalVideoCards.length - 1 
                    : currentModalIndex - 1;
                
                console.log(`⬅️ Previous: ${currentModalIndex} → ${newIndex}`);
                
                currentModalIndex = newIndex;
                openVideoModalFixed(newIndex);
            });
        }
        
        // Next button
        if (nextBtn) {
            // Köhnə listener-ləri sil
            nextBtn.replaceWith(nextBtn.cloneNode(true));
            const newNextBtn = modal.querySelector('.video-modal-next, .lightbox-next');
            
            newNextBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const newIndex = (currentModalIndex + 1) % modalVideoCards.length;
                
                console.log(`➡️ Next: ${currentModalIndex} → ${newIndex}`);
                
                currentModalIndex = newIndex;
                openVideoModalFixed(newIndex);
            });
        }
        
        console.log('✅ Modal naviqasiya düzəldildi');
    }
    
    // ===============================
    // KEYBOARD NAVİQASİYA
    // ===============================
    
    function setupKeyboardNavigationFixed() {
        // Köhnə keyboard listener-ləri sil
        document.removeEventListener('keydown', handleKeyboardNavigation);
        
        document.addEventListener('keydown', handleKeyboardNavigation);
        
        function handleKeyboardNavigation(e) {
            const modal = document.getElementById('videoModal') || 
                         document.querySelector('.video-modal');
            
            if (!modal || !modal.classList.contains('active')) return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    const prevIndex = currentModalIndex === 0 
                        ? modalVideoCards.length - 1 
                        : currentModalIndex - 1;
                    
                    currentModalIndex = prevIndex;
                    openVideoModalFixed(prevIndex);
                    break;
                    
                case 'ArrowRight':
                    e.preventDefault();
                    const nextIndex = (currentModalIndex + 1) % modalVideoCards.length;
                    
                    currentModalIndex = nextIndex;
                    openVideoModalFixed(nextIndex);
                    break;
                    
                case 'Escape':
                    closeModalFixed();
                    break;
            }
        }
        
        console.log('⌨️ Keyboard naviqasiya quruldu');
    }
    
    // ===============================
    // MODAL BAĞLAMA
    // ===============================
    
    function closeModalFixed() {
        const modal = document.getElementById('videoModal') || 
                     document.querySelector('.video-modal');
        
        if (!modal) return;
        
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
        document.body.style.overflowY = 'auto';
        document.body.style.overflowX = 'hidden';
        
        const modalVideo = modal.querySelector('video');
        if (modalVideo) {
            modalVideo.pause();
            modalVideo.currentTime = 0;
            modalVideo.src = '';
        }
        
        console.log('❌ Modal bağlandı');
    }
    
    function setupModalClosingFixed() {
        const modal = document.getElementById('videoModal') || 
                     document.querySelector('.video-modal');
        
        if (!modal) return;
        
        // Close button
        const closeBtn = modal.querySelector('.video-modal-close, .lightbox-close');
        if (closeBtn) {
            closeBtn.replaceWith(closeBtn.cloneNode(true));
            const newCloseBtn = modal.querySelector('.video-modal-close, .lightbox-close');
            newCloseBtn.addEventListener('click', closeModalFixed);
        }
        
        // Overlay
        const overlay = modal.querySelector('.video-modal-overlay, .lightbox-overlay');
        if (overlay) {
            overlay.replaceWith(overlay.cloneNode(true));
            const newOverlay = modal.querySelector('.video-modal-overlay, .lightbox-overlay');
            newOverlay.addEventListener('click', closeModalFixed);
        }
        
        console.log('✅ Modal bağlama quruldu');
    }
    
    // ===============================
    // SİSTEMİ YENİDƏN BAŞLAT
    // ===============================
    
    function reinitializeVideoSystem() {
        console.log('🔄 Video sistem yenidən başladılır...');
        
        // 1. Modal sistemi yenidən qur
        rebuildModalSystem();
        
        // 2. Modal naviqasiya qur
        setupModalNavigationFixed();
        
        // 3. Modal bağlama qur
        setupModalClosingFixed();
        
        // 4. Keyboard naviqasiya qur
        setupKeyboardNavigationFixed();
        
        console.log('✅ Video sistem hazırdır!');
        console.log(`📊 ${modalVideoCards.length} video kartı hazırlandı`);
    }
    
    // ===============================
    // BAŞLATMA
    // ===============================
    
    // Dərhal başlat
    reinitializeVideoSystem();
    
    // 500ms sonra yenidən başlat (əmin olmaq üçün)
    setTimeout(reinitializeVideoSystem, 500);
    
    // 2 saniyə sonra da (DOM tam yüklənəndən sonra)
    setTimeout(reinitializeVideoSystem, 2000);
    
    // Global funksiya olaraq təqdim et
    window.fixVideoCards = reinitializeVideoSystem;
    
    console.log('🎯 Video kart click düzəlişi tamamlandı!');
    console.log('🧪 Test üçün: fixVideoCards()');
});

// ===============================
// DEBUG VƏ TEST FUNKSİYALARI
// ===============================

// Test funksiyası
window.testVideoCardClick = function() {
    console.log('🧪 Video kart test başlayır...');
    
    const cards = document.querySelectorAll('.work-card');
    console.log(`📊 Tapılan kartlar: ${cards.length}`);
    
    cards.forEach((card, index) => {
        const video = card.querySelector('video, .work-video');
        console.log(`Kart ${index}:`, {
            hasVideo: !!video,
            videoSrc: video?.src || video?.dataset?.src || 'YOX',
            clickListeners: card.onclick ? 'VAR' : 'YOX'
        });
    });
    
    const modal = document.getElementById('videoModal');
    console.log(`Modal: ${modal ? '✅ VAR' : '❌ YOX'}`);
};

// Manuel modal açma testi
window.testOpenModal = function(index = 0) {
    console.log(`🧪 Modal test: ${index} nömrəli kartı açır...`);
    
    if (typeof openVideoModalFixed === 'function') {
        openVideoModalFixed(index);
    } else {
        console.error('❌ openVideoModalFixed funksiyası tapılmadı');
    }
};

console.log('🎯 Video düzəliş yükləndi!');
console.log('🧪 Test funksiyaları: testVideoCardClick(), testOpenModal(index)');
// ===============================
// ===============================
// iOS VIDEO THUMBNAIL FIX - MINIMAL VERSION
// Yalnız iOS-da video thumbnail problemi həll edir
// Mövcud dizayna toxunmur!
// ===============================

document.addEventListener('DOMContentLoaded', function() {
    console.log('🍎 iOS video thumbnail fix - minimal version');
    
    // iOS müəyyənləşdirmə
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    
    console.log(`iOS cihaz: ${isIOS ? 'BƏLİ' : 'XEYR'}`);
    
    // Yalnız iOS-da işləsin
    if (!isIOS) {
        console.log('❌ iOS deyil - script dayandırılır');
        return;
    }
    
    // ===============================
    // YALNIZ POSTER OLMAYAN VIDEOLAR ÜÇÜN FIX
    // ===============================
    
    function fixIOSVideoThumbnails() {
        const videos = document.querySelectorAll('video');
        let fixedCount = 0;
        
        videos.forEach((video, index) => {
            // Artıq fix edilib?
            if (video.dataset.iosThumbnailFixed === 'true') return;
            
            // Poster var?
            const hasPoster = video.poster && video.poster.trim() !== '';
            
            if (hasPoster) {
                console.log(`✅ Video ${index} - poster var, keçilir`);
                return;
            }
            
            console.log(`🔧 Video ${index} - poster yox, düzəldilir...`);
            
            // iOS üçün video atributları
            video.setAttribute('playsinline', '');
            video.setAttribute('webkit-playsinline', '');
            video.preload = 'metadata';
            
            // Thumbnail yaratmağa çalış
            createIOSThumbnail(video, index);
            
            video.dataset.iosThumbnailFixed = 'true';
            fixedCount++;
        });
        
        console.log(`✅ ${fixedCount} video iOS üçün düzəldildi`);
    }
    
    // ===============================
    // IOS ÜÇÜN THUMBNAIL YARATMA
    // ===============================
    
    function createIOSThumbnail(video, index) {
        // Video metadata yüklənəndə
        const handleLoadedData = function() {
            try {
                // Canvas yarad
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Video ölçüləri
                canvas.width = video.videoWidth || 640;
                canvas.height = video.videoHeight || 360;
                
                // İlk frame çək (0.1 saniyə)
                video.currentTime = 0.1;
                
                video.addEventListener('seeked', function() {
                    try {
                        // Frame-i canvas-a çək
                        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                        
                        // Data URL yarad
                        const thumbnailUrl = canvas.toDataURL('image/jpeg', 0.7);
                        
                        // Video-ya poster kimi təyin et
                        video.poster = thumbnailUrl;
                        
                        console.log(`📸 Video ${index} üçün iOS thumbnail yaradıldı`);
                        
                    } catch (error) {
                        console.warn(`⚠️ Video ${index} thumbnail xətası:`, error.message);
                        
                        // CORS xətası - sadə poster təyin et
                        if (error.name === 'SecurityError') {
                            video.poster = createSimplePoster(index);
                        }
                    }
                }, { once: true });
                
            } catch (error) {
                console.warn(`⚠️ Video ${index} canvas xətası:`, error.message);
                video.poster = createSimplePoster(index);
            }
            
            video.removeEventListener('loadeddata', handleLoadedData);
        };
        
        // Video hazır olub?
        if (video.readyState >= 1) {
            handleLoadedData();
        } else {
            video.addEventListener('loadeddata', handleLoadedData, { once: true });
            
            // 3 saniyə timeout
            setTimeout(() => {
                video.removeEventListener('loadeddata', handleLoadedData);
                console.warn(`⚠️ Video ${index} metadata timeout`);
                video.poster = createSimplePoster(index);
            }, 3000);
        }
    }
    
    // ===============================
    // SADƏ POSTER YARATMA (CORS PROBLEMI ÜÇÜN)
    // ===============================
    
    function createSimplePoster(index) {
        // 1x1 şəffaf PNG (minimal impact)
        return 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==';
    }
    
    // ===============================
    // İNİTİALİZASİYA
    // ===============================
    
    console.log('🚀 iOS video thumbnail fix başlayır...');
    
    // Dərhal çalışdır
    fixIOSVideoThumbnails();
    
    // 1 saniyə sonra yenidən (DOM tam yüklənəndə)
    setTimeout(fixIOSVideoThumbnails, 1000);
    
    // Global funksiya
    window.fixIOSVideos = fixIOSVideoThumbnails;
    
    console.log('✅ iOS video thumbnail fix hazırdır');
});

console.log('🍎 iOS Video Thumbnail Fix (Minimal) yükləndi');
// HTML-dəki video strukturunu düzəltmək üçün kod
document.addEventListener('DOMContentLoaded', function() {
    
    console.log('🔧 Fixing video structure for iOS compatibility...');
    
    // ===============================
    // VIDEO STRUCTURE FİX
    // ===============================
    
    function fixVideoStructure() {
        const workCards = document.querySelectorAll('.work-card');
        let fixedVideos = 0;
        
        workCards.forEach((card, index) => {
            const video = card.querySelector('video, .work-video');
            
            if (video) {
                fixVideoElement(video, card, index);
                fixedVideos++;
            }
        });
        
        console.log(`✅ Fixed ${fixedVideos} videos for iOS compatibility`);
    }
    
    function fixVideoElement(video, card, index) {
        // 1. Video atributlarını düzəlt
        video.setAttribute('playsinline', '');
        video.setAttribute('webkit-playsinline', '');
        video.setAttribute('muted', '');
        video.muted = true;
        video.preload = 'metadata';
        video.controls = false;
        
        // 2. Class əlavə et
        if (!video.classList.contains('work-video')) {
            video.classList.add('work-video');
        }
        
        // 3. Source elementlərini yoxla və düzəlt
        fixVideoSources(video);
        
        // 4. Poster əlavə et (opsional)
        if (!video.poster && !video.getAttribute('poster')) {
            video.poster = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIGZpbGw9IiMxYTFhMWEiLz48L3N2Zz4=';
        }
        
        // 5. Container pozisiyasını düzəlt
        if (card && getComputedStyle(card).position === 'static') {
            card.style.position = 'relative';
        }
        
        console.log(`🔧 Fixed video ${index + 1}`);
    }
    
    function fixVideoSources(video) {
        const sources = video.querySelectorAll('source');
        let hasValidSource = false;
        
        sources.forEach(source => {
            const src = source.getAttribute('src');
            
            if (src) {
                // Type atributu əlavə et/düzəlt
                if (src.includes('.mp4')) {
                    source.setAttribute('type', 'video/mp4');
                    hasValidSource = true;
                } else if (src.includes('.mov')) {
                    // MOV faylları iOS-da daha yaxşı işləyir
                    source.setAttribute('type', 'video/quicktime');
                    hasValidSource = true;
                } else if (src.includes('.webm')) {
                    source.setAttribute('type', 'video/webm');
                    hasValidSource = true;
                }
                
                // Codecs atributunu sil (iOS-da problem yaradır)
                if (source.hasAttribute('codecs')) {
                    source.removeAttribute('codecs');
                }
            }
        });
        
        // Əgər video src-i varsa source yarad
        if (video.src && !hasValidSource) {
            const source = document.createElement('source');
            source.src = video.src;
            
            if (video.src.includes('.mp4')) {
                source.type = 'video/mp4';
            } else if (video.src.includes('.mov')) {
                source.type = 'video/quicktime';
            } else if (video.src.includes('.webm')) {
                source.type = 'video/webm';
            }
            
            video.appendChild(source);
            hasValidSource = true;
        }
        
        // Video-nu yenidən yüklə
        if (hasValidSource) {
            video.load();
        }
    }
    
    // ===============================
    // MODAL VIDEO FİX
    // ===============================
    
    function fixModalVideo() {
        const modalVideo = document.querySelector('#modalVideo');
        
        if (modalVideo) {
            modalVideo.setAttribute('playsinline', '');
            modalVideo.setAttribute('webkit-playsinline', '');
            modalVideo.muted = false; // Modal videolar səsli ola bilər
            modalVideo.controls = true;
            modalVideo.preload = 'metadata';
            
            console.log('🔧 Fixed modal video for iOS');
        }
    }
    
    // ===============================
    // HERO VIDEO FİX
    // ===============================
    
    function fixHeroVideo() {
        const heroVideo = document.querySelector('.hero-video');
        
        if (heroVideo) {
            heroVideo.setAttribute('playsinline', '');
            heroVideo.setAttribute('webkit-playsinline', '');
            heroVideo.muted = true;
            heroVideo.autoplay = true;
            heroVideo.loop = true;
            heroVideo.preload = 'auto';
            
            // Autoplay üçün istifadəçi interaksiyasını gözlə
            const enableHeroAutoplay = () => {
                heroVideo.play().catch(e => {
                    console.log('Hero video autoplay failed:', e);
                });
            };
            
            document.addEventListener('touchstart', enableHeroAutoplay, { once: true });
            document.addEventListener('click', enableHeroAutoplay, { once: true });
            
            console.log('🔧 Fixed hero video for iOS');
        }
    }
    
    // ===============================
    // REELS VIDEO FİX
    // ===============================
    
    function fixReelsVideos() {
        const reelsVideos = document.querySelectorAll('.reels-container video, .reel-video');
        
        reelsVideos.forEach((video, index) => {
            video.setAttribute('playsinline', '');
            video.setAttribute('webkit-playsinline', '');
            video.muted = true;
            video.preload = 'metadata';
            video.controls = false;
            
            fixVideoSources(video);
            
            console.log(`🔧 Fixed reel video ${index + 1}`);
        });
    }
    
    // ===============================
    // HOVER EFFECTS VƏ PLAY/PAUSE
    // ===============================
    
    function setupVideoInteractions() {
        const videos = document.querySelectorAll('.work-video, .reel-video');
        
        videos.forEach((video, index) => {
            // Hover/Touch play/pause
            let hoverTimeout;
            
            const playVideo = () => {
                if (video.paused) {
                    video.play().catch(e => {
                        console.log(`Video ${index + 1} play failed:`, e);
                    });
                }
            };
            
            const pauseVideo = () => {
                if (!video.paused) {
                    video.pause();
                }
            };
            
            // Desktop hover events
            video.addEventListener('mouseenter', () => {
                clearTimeout(hoverTimeout);
                hoverTimeout = setTimeout(playVideo, 200);
            });
            
            video.addEventListener('mouseleave', () => {
                clearTimeout(hoverTimeout);
                pauseVideo();
            });
            
            // Mobile touch events
            video.addEventListener('touchstart', (e) => {
                e.preventDefault();
                playVideo();
            });
            
            video.addEventListener('touchend', () => {
                setTimeout(pauseVideo, 3000); // 3 saniyə sonra pause
            });
            
            // Click events for modal
            video.addEventListener('click', (e) => {
                e.preventDefault();
                openVideoModal(video);
            });
        });
        
        console.log(`✅ Setup interactions for ${videos.length} videos`);
    }
    
    // ===============================
    // VIDEO MODAL SİSTEMİ
    // ===============================
    
    function setupVideoModal() {
        // Modal HTML yaratmaq
        if (!document.querySelector('#videoModal')) {
            const modalHTML = `
                <div id="videoModal" class="video-modal" style="
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.9);
                    z-index: 9999;
                    padding: 20px;
                    box-sizing: border-box;
                ">
                    <div class="modal-content" style="
                        position: relative;
                        width: 100%;
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">
                        <video id="modalVideo" style="
                            max-width: 100%;
                            max-height: 100%;
                            width: auto;
                            height: auto;
                        " controls playsinline webkit-playsinline></video>
                        <button id="closeModal" style="
                            position: absolute;
                            top: 10px;
                            right: 10px;
                            background: rgba(255, 255, 255, 0.2);
                            border: none;
                            color: white;
                            font-size: 24px;
                            padding: 10px;
                            cursor: pointer;
                            border-radius: 50%;
                            width: 50px;
                            height: 50px;
                        ">×</button>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }
        
        // Modal event listeners
        const modal = document.querySelector('#videoModal');
        const modalVideo = document.querySelector('#modalVideo');
        const closeBtn = document.querySelector('#closeModal');
        
        closeBtn.addEventListener('click', closeVideoModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeVideoModal();
            }
        });
        
        // ESC key ilə modal bağla
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.style.display === 'flex') {
                closeVideoModal();
            }
        });
        
        console.log('✅ Video modal system setup complete');
    }
    
    function openVideoModal(video) {
        const modal = document.querySelector('#videoModal');
        const modalVideo = document.querySelector('#modalVideo');
        
        if (modal && modalVideo) {
            // Video source-u kopyala
            modalVideo.src = video.src || video.querySelector('source')?.src || '';
            
            // Video atributlarını təyin et
            modalVideo.muted = false;
            modalVideo.controls = true;
            modalVideo.setAttribute('playsinline', '');
            modalVideo.setAttribute('webkit-playsinline', '');
            
            // Modal-ı göstər
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Video-nu yüklə və oyna
            modalVideo.load();
            modalVideo.play().catch(e => {
                console.log('Modal video play failed:', e);
            });
        }
    }
    
    function closeVideoModal() {
        const modal = document.querySelector('#videoModal');
        const modalVideo = document.querySelector('#modalVideo');
        
        if (modal && modalVideo) {
            modalVideo.pause();
            modalVideo.src = '';
            modal.style.display = 'none';
            document.body.style.overflow = '';
        }
    }
    
    // ===============================
    // LAZY LOADING SİSTEMİ
    // ===============================
    
    function setupLazyLoading() {
        const videos = document.querySelectorAll('video[data-src]');
        
        const videoObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const video = entry.target;
                    const src = video.getAttribute('data-src');
                    
                    if (src) {
                        video.src = src;
                        video.removeAttribute('data-src');
                        video.load();
                        
                        // Video düzəlişlərini tətbiq et
                        fixVideoElement(video, video.closest('.work-card'));
                    }
                    
                    videoObserver.unobserve(video);
                }
            });
        }, {
            rootMargin: '50px'
        });
        
        videos.forEach(video => {
            videoObserver.observe(video);
        });
        
        console.log(`✅ Setup lazy loading for ${videos.length} videos`);
    }
    
    // ===============================
    // PERFORMANCE MONİTORİNG
    // ===============================
    
    function monitorVideoPerformance() {
        const videos = document.querySelectorAll('video');
        let loadErrors = 0;
        let playErrors = 0;
        
        videos.forEach((video, index) => {
            video.addEventListener('error', (e) => {
                loadErrors++;
                console.error(`Video ${index + 1} load error:`, e);
            });
            
            video.addEventListener('loadstart', () => {
                console.log(`Video ${index + 1} started loading`);
            });
            
            video.addEventListener('canplay', () => {
                console.log(`Video ${index + 1} can play`);
            });
            
            video.addEventListener('stalled', () => {
                console.warn(`Video ${index + 1} stalled`);
            });
        });
        
        // Performance məlumatlarını göstər
        setTimeout(() => {
            console.log(`📊 Video Performance Report:
                Total Videos: ${videos.length}
                Load Errors: ${loadErrors}
                Play Errors: ${playErrors}
            `);
        }, 5000);
    }
    
    // ===============================
    // SİSTEMİ İŞƏ SAL
    // ===============================
    
    // Təcili düzəlişlər
    fixVideoStructure();
    fixModalVideo();
    fixHeroVideo();
    fixReelsVideos();
    
    // Video modal sistemi qur
    setupVideoModal();
    
    // Video interaksiyalarını qur
    setupVideoInteractions();
    
    // Lazy loading sistemi
    setupLazyLoading();
    
    // Performance monitoring
    monitorVideoPerformance();
    
    // Gecikmə ilə yenidən yoxla
    setTimeout(() => {
        fixVideoStructure();
        console.log('🔄 Re-checked video structure');
    }, 1000);
    
    // Resize eventində yenidən düzəlt
    window.addEventListener('resize', () => {
        setTimeout(() => {
            fixVideoStructure();
            console.log('🔄 Re-fixed videos after resize');
        }, 500);
    });
    
    // Orientation dəyişikliyində yenidən düzəlt
    window.addEventListener('orientationchange', () => {
        setTimeout(() => {
            fixVideoStructure();
            setupVideoInteractions();
            console.log('🔄 Re-fixed videos after orientation change');
        }, 1000);
    });
    
    // Network dəyişikliklərini izlə (opsional)
    if ('connection' in navigator) {
        navigator.connection.addEventListener('change', () => {
            console.log('📶 Network changed, adjusting video quality...');
            
            const videos = document.querySelectorAll('video');
            videos.forEach(video => {
                if (navigator.connection.effectiveType === 'slow-2g' || 
                    navigator.connection.effectiveType === '2g') {
                    video.preload = 'none';
                } else {
                    video.preload = 'metadata';
                }
            });
        });
    }
    
    console.log('✅ iOS Video Fix System fully initialized!');
    
}); // DOMContentLoaded sonu

// ===============================
// GLOBAL HELPER FUNKSİYALAR
// ===============================

// Video-nu əl ilə düzəltmək üçün
window.fixVideo = function(videoElement) {
    if (videoElement && videoElement.tagName === 'VIDEO') {
        fixVideoElement(videoElement, videoElement.closest('.work-card'));
        console.log('✅ Manually fixed video');
    }
};

// Bütün video-ları yenidən düzəltmək üçün
window.refreshAllVideos = function() {
    document.dispatchEvent(new Event('DOMContentLoaded'));
    console.log('🔄 Refreshed all videos');
};

// Video modal-ını əl ilə açmaq üçün
window.openVideoInModal = function(videoSrc) {
    const modalVideo = document.querySelector('#modalVideo');
    if (modalVideo) {
        modalVideo.src = videoSrc;
        document.querySelector('#videoModal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
        modalVideo.play();
    }
};
}
    </script>
</body>
</html>
